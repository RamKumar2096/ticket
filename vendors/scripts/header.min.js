function loginUserInfo(valueS){"use strict";var module,e={options:[],header:[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],dataos:[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],databrowser:[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}],init:function(){var agent=this.header.join(" "),os,browser;return{os:this.matchItem(agent,this.dataos),browser:this.matchItem(agent,this.databrowser)}},matchItem:function(string,data){var i=0,j=0,html="",regex,regexv,match,matches,version;for(i=0;i<data.length;i+=1)if(match=(regex=new RegExp(data[i].value,"i")).test(string)){if(regexv=new RegExp(data[i].version+"[- /:;]([\\d._]+)","i"),version="",(matches=string.match(regexv))&&matches[1]&&(matches=matches[1]),matches)for(matches=matches.split(/[._]+/),j=0;j<matches.length;j+=1)version+=0===j?matches[j]+".":matches[j];else version="0";return{name:data[i].name,version:parseFloat(version)}}return{name:"unknown",version:0}}}.init();$.getJSON("https://api.ipify.org?format=json",(function(data){const de={username:valueS.name,system:e,func:"loginUser",date:(new Date).toDateString()+" - "+(new Date).toTimeString(),ip:data.ip};fetch("https://script.google.com/macros/s/AKfycbx5sJ4xzRxk7c0kmo_mFJosMtiKO0xHvREFTgXOhNEiPZJ6kPn_HC-78NJyV3WGwJ37BQ/exec",{method:"post",body:JSON.stringify(de)}).then(responsedata=>{responsedata.json(result=>{console.log(result)})})}))}var logUserDatas,task_entry_point=null,current_software="home",click_notify,notification_data_ar=[],task_pending_tab_status_ls=[],preloader_tab_type_ls=[],view_tab_type_ls=[],manage_tab_type_ls=[],managing_tab_type_ls=[],approval_tab_type_ls=[],preloader_obj={},log_no_record='<div class="no_record_img mt-5"><div><img src="/vendors/images/log_no_record.svg" alt=""></div><div>No Record</div></div>',no_record='<div class="no_record_img mt-5"><div><img src="/vendors/images/no_data.svg" alt=""></div><div>No Record</div></div>',fetch_loader=' <div class="d-flex align-items-center justify-content-center  fetching_loader" style="height:400px"><div class="dashBB_loader"></div></div>',loacalTemplate_chatLoader='<div class="w-100 h-100 d-flex align-items-center justify-content-center no_chat_template p-4"><div class="w-50 h-50 text-center"> <div><img src="https://drive.google.com/uc?export=view&id=10hd-GQbTgi1T06vvGF5_SGuSs_pqYLva" alt="" width="50%" height="50%"></div><div class="no_chat_text my-2"><div class="chat_prograss_bar"></div></div></div></div>',button_loader='<div class="spinner-border text-light" role="status" style="width:20px;height:20px;"><span class="visually-hidden">Loading...</span></div>';function fetch_loader_show(id){$(id).html(fetch_loader)}async function browser_notification(localmessage){console.log("ape",localmessage);let granted=!1;if("granted"===Notification.permission)granted=!0;else if("denied"!==Notification.permission){let permission;granted="granted"===await Notification.requestPermission()}if(granted){const notification=new Notification("Sidharthhousing-webapp",{body:localmessage.notification_info,icon:"../vendors/images/Sidharth-Logo-Final.png",vibrate:!0});setTimeout(()=>{notification.close()},1e4)}}function checkForCookie(name){let cookieString=document.cookie.match(name+"=[^;]+");const cookie=cookieString?cookieString[0]:cookieString;if(cookie){const splitToken=cookie.split("=")[1],values=splitToken.split(",");getUserLog(values[0]).then(result=>{if(1==result.status){const log_user=result.data[0].data();logUserDatas=log_user,notificationlive(logUserDatas.emp_name),loginUserInfo({name:logUserDatas.emp_name}),assign_user_details(),dashboard_count_setter()}else window.open("/index.html","_top")})}else console.log(cookie,"a")}function dashboard_count_setter(){const dashBoard=dashBoardTask(logUserDatas.emp_name);dashBoard.then(d=>{0!=d.status&&(header_overview_box_count(d.data),dashboard_render(d.data))})}function assign_user_details(){$(".user-name").text(logUserDatas.emp_name)}function showDeparment(){const software=logUserDatas.software,navbar=Array.from($(".side_link_tag"));software.forEach(alw=>{const selects=$(`.side_link_tag[data-render=${alw}]`);console.log(alw,selects)})}function scroll_down(scroll){$(scroll).stop().animate({scrollTop:$(scroll)[0].scrollHeight},1e3)}function showLoader(){$(".loadingPage").css("display","block"),$("body,html").css("overflow","hidden")}function hideLoader(){$(".loadingPage").css("display","none"),$("body,html").css("overflow-y","auto")}function checkPreDate(e){var q=new Date,date,mydate;new Date(q.getFullYear(),q.getMonth(),q.getDate())>new Date($(e).val())&&(alertify.alert("Message!","You have selected previous date....."),$(e).val(""))}function header_overview_box_count(count_obj){const count_value=Object.keys(count_obj);count_value.length>0&&count_value.forEach(keyV=>{$(`.task_${keyV}_count`).text(count_obj[keyV].length)})}function addNotify_func(notify,ad_value){let sent_tab,receiver;console.log("notiy",notify),sent_tab="auto"!=ad_value.tabs?ad_value.tabs:logUserDatas.emp_name==notify.user_name?"Managing":"Pending",receiver=""!=ad_value.receiver?ad_value.receiver:logUserDatas.emp_name==notify.user_name?logUserDatas.manager:logUserDatas.emp_name,console.log("uloa",logUserDatas);const notification_obj={action:ad_value.action,sender:logUserDatas.emp_name,receiver:receiver,software:ad_value.software,tab:sent_tab,token:notify.token,click:ad_value.click,message:ad_value.message,card_user:notify.user_name};console.log(notification_obj,"sdfasdf"),console.log(notify,"sdfasdf"),notificationalert(notification_obj)}function notification_ui(notification){const notification_tag=`<li class="notification_tag" data-notification-token="${notification.doc_id}" onclick="click_notifications_tag(this)">\n                                    <a href="javascript:;"> \n                                            <h3>${notification.software_name}</h3>\n                                        <p>\n                                            ${notification.notification_info}\n                                        </p>\n                                    </a>\n                             </li>`;return notification_tag}function append_notification(notification){$(".no_nofity")&&$(".no_nofity").remove();const notification_tag=notification_ui(notification);$("#notifications_container_list").append(notification_tag),notification_data_ar.push(notification),find_notification_card(notification),notification_bell_count()}function find_notification_card(notify_card){const tab=notify_card.moveto_tab.toLowerCase(),token=notify_card.doc_id,modify=$(`[data-modify=${token}]`),chat=$(`[data-chat-token=${token}]`);console.log(chat,modify),"Chat"==notify_card.icon?$(chat).children(".red_dt_cls").removeClass("d-none"):$(modify).children(".red_dt_cls").removeClass("d-none")}function notification_readed(id){$(`.notification_tag[data-notification-token=${id}]`).remove(),$(".notification-active").addClass("d-none")}function notification_empty(){$("#notifications_container_list").html('<h3 class="no_nofity font-12 text-center">No Notifications...</h3>')}function notification_bell_count(){0==notification_data_ar.length?$(".notification-active").addClass("d-none"):($(".notification-active").removeClass("d-none"),$(".notification-active").text(notification_data_ar.length))}function click_notifications_tag(e){const notificaionToken=$(e).attr("data-notification-token");console.log(notification_data_ar,"ddS");const find_notifications=notification_data_ar.filter(nofify=>nofify.doc_id==notificaionToken);if(console.log(notification_data_ar,"dddS"),$(e).addClass("d-none"),find_notifications.length>0){const get_obj=find_notifications[find_notifications.length-1];click_notify=get_obj,read_update_notification(get_obj.doc_id),"Click"==get_obj.notification_type?notification_move_software(get_obj):alertify.success("It cannot be redirected..!"),notification_data_ar=notification_data_ar.filter(nofify=>nofify.doc_id!=notificaionToken)}else notification_bell_count(),alertify.error("Sorry! this message already readed")}function notification_move_software(notificaion_keys){const notify_data=notificaion_keys,tab=notify_data.moveto_tab.toLowerCase(),sotfware=notify_data.software_name.toLowerCase();task_entry_point={tab:tab,notification:!0,notification_data:notify_data},console.log(current_software),current_software==notify_data.software_name.toLowerCase()?auto_move_tab(""):get_template(sotfware),console.log(notificaion_keys,"keysss")}function read_update_notification(id){readNotification(logUserDatas.emp_name,id)}function dashboard_render(chart_data){function drawStuff(){var data=new google.visualization.arrayToDataTable([["Task","Counts"],["Pending",chart_data.pending.length],["Scheduling",chart_data.scheduling.length],["Completed",chart_data.completed.length],["Awaiting Approval",chart_data.awaiting_approval.length]]),options={width:400,height:400,legend:{position:"none"},chart:{title:"Task Overview"},axes:{x:{0:{side:"top",label:"Task type of cards"}}},bar:{groupWidth:"10%"}},task;new google.charts.Bar(document.getElementById("task_chart_tag")).draw(data,google.charts.Bar.convertOptions(options))}$("#task_chart_tag").empty(),google.charts.load("current",{packages:["bar"]}),google.charts.setOnLoadCallback(drawStuff)}function unsubcribe_onsnap(){const snap_unsub=Object.keys(onsnap_store_obj);0!=snap_unsub.length&&snap_unsub.forEach(unsub=>{onsnap_store_obj[unsub]()})}function get_template(software){const verifie=logUserDatas.software.findIndex(ar=>ar==software);-1!=verifie?(showLoader(),unsubcribe_onsnap(),$.get(`/component/${software}-template.html`,(function(data){if(current_software=software,$(".main-container").html(data),"task"==software){taskFunctions(),task_snap_funtions(logUserDatas.emp_name),taskPreloader(logUserDatas.emp_name).then(preloder_card=>{0==preloder_card.status?makePreloaderCard([]):(console.log(preloder_card,"pre"),makePreloaderCard(preloder_card.data,!1))});let sub_ar=logUserDatas.subordinates_details.ad;console.log(sub_ar),0!=sub_ar.length&&(sub_ar=sub_ar.map(sub=>sub.subname),approvalCard({sub_name:sub_ar}).then(aprD=>{0==aprD.status?makeApprovalCard([],"",!1):makeApprovalCard(aprD.data,"",!0),console.log(aprD,"apprf")})),auto_move_tab("")}else"home"==software?dashboard_count_setter():"profile"==software?profile_set():"leads"==software?(leadsFunctions(),auto_move_tab_leads("dashboard"),tele_report_dash(logUserDatas.emp_name),callDashboardCount(logUserDatas.emp_name),lead_onsnap(logUserDatas.emp_name),sitevisitCard(logUserDatas.emp_name).then(sitE=>{1==sitE.status&&makeLeadSitevisitCard(sitE.data,!1,!1)})):"log"==software&&logFunctions();hideLoader()}))):alertify.error("Not Allowed!")}function move_to_task(){get_template("task")}function profile_set(){const de=logUserDatas;console.log(de),$(".emp_name").text(de.emp_name),$(".emp_designation").text(de.designation),$(".emp_code").text(de.emp_code),$(".emp_manager").text(de.manager),$(".emp_department").text(de.department),$(".emp_mail").text(de.mail_id),$(".emp_password").val(de.password)}function profile_edit(e){console.log(e);const eE=$(e).text(),passE=$(".emp_password");"Edit"==eE?($(e).text("Cancel"),$(e).next().prop("disabled",!1),$(passE).prop("disabled",!1)):($(e).text("Edit"),$(e).next().prop("disabled",!0),$(passE).prop("disabled",!0))}function change_profile(e){const passE=$(".emp_password").val(),user=logUserDatas;passE.length>4?($(e).html('<div class="spinner-border text-light" role="status" style="width:20px;height:20px;"><span class="visually-hidden">Loading...</span></div>'),changeProfile(user.emp_name,passE).then(userUpdate=>{$(e).html("Save"),$(e).prop("disabled",!0),$(".emp_password").prop("disabled",!0),$(e).prev().html("Edit"),logUserDatas=userUpdate,profile_set(),alertify.alert("Message!","Profile Update Successfully....")})):alertify.alert("Message!","Password length Minimum  5 letter")}function auto_move_tab(manual_move){if($(".tab_container_box .tab-pane").removeClass("show active"),$(".tab_container_box_header .nav-item .nav-link").removeClass("active"),""!=manual_move)$(`[href="#${manual_move}_bg_tab"]`).addClass("active"),$(`#${manual_move}_bg_tab`).addClass("active show");else if(null==task_entry_point)$('[href="#pending_bg_tab"]').addClass("active"),$("#pending_bg_tab").addClass("active show");else if(console.log(task_entry_point),$(`[href="#${task_entry_point.tab}_bg_tab"]`).addClass("active"),$(`#${task_entry_point.tab}_bg_tab`).addClass("active show"),1==task_entry_point.notification)if(console.log(task_entry_point.notification_data,"noffff"),"managing"==task_entry_point.tab){const managing_tab_filter={fill_name:task_entry_point.notification_data.notification_send_by,fill_status:"All",sub_users:""};managing_main_filter(managing_tab_filter,task_entry_point),$("#task_managing_name_sort").val(managing_tab_filter.fill_name)}else if("pending"==task_entry_point.tab){const ve=task_entry_point;setTimeout(()=>{const filter_by={status:"All",user:logUserDatas.emp_name};pending_main_filter(filter_by,ve,!0)},2e3)}else if("approval"==task_entry_point.tab){const ve=task_entry_point;setTimeout(()=>{const approval_tab_filter={user:ve.notification_data.notification_send_by,user_name:logUserDatas.emp_name,sub_name:[]};approval_main_filter(approval_tab_filter,ve,!0,!0),$("#task_approval_name_sort").val(approval_tab_filter.user)},2e3)}task_entry_point=null}function taskFunctions(){task_pending_tab_status_ls=[],preloader_tab_type_ls=[],approval_tab_type_ls=[],manage_tab_type_ls=[],managing_tab_type_ls=[],view_tab_type_ls=[],$(".head_buttons").click(add_task_click_assign),$("#add_task_confirm_btn").click(addNewTask),$(".chatValue").keyup(enterChatKey),selectInputs_value()}function add_task_click_assign(){let btnType=$(this).attr("data-modal");"preloader"==btnType&&$(".preloader_sub_inputs").css("display","none"),$("#preloaderChange_task_confirm_btn").addClass("d-none"),$("#preloader_task_confirm_btn").removeClass("d-none"),"add"==btnType&&$(".extra_close_btn").parent().remove(),$(`#${btnType}_task_modal_form`)[0].reset(),$(`#${btnType}_task_modal`).modal("show")}function extra_task(){let taskInfos,taskLength,extra_template='<div class="page-header">\n                                <div class="text-right extra_close_btn " onclick="remove_extra_task(this)"><i class="fa fa-close"></i></div>\n                                <div class="form-group">\n                                    <label>Task Info</label>\n                                    <input class="form-control new_task_info " type="text" placeholder="Task Info.......">\n                                </div>\n                                <div class="form-group">\n                                    <label>Schedule Date</label>\n                                    <input class="form-control new_task_date requirePreDate" type="date" onchange="checkPreDate(this)">\n                                </div>\n                            </div>';Array.from($(".new_task_info")).length<5?($("#add_task_modal_form").append(extra_template),ex_cHide(),$("#add_task_modal_form").stop().animate({scrollTop:$("#add_task_modal_form")[0].scrollHeight},100)):alertify.alert("Message!","Maximum 5 task can be added!")}function remove_extra_task(e){$(e).parent().removeClass("extra_task_add_ani"),$(e).parent().addClass("extra_task_close_ani"),$(e).parent().fadeOut("1000",(function(){$(this).remove(),ex_cHide()}))}function ex_cHide(){$(".extra_close_btn").addClass("d-none");const ex_length=$(".extra_close_btn").length-1;$(".extra_close_btn").eq(ex_length).removeClass("d-none")}function preloaderTypeLoad(e){const selectType=$(e).val();if("Daily"==selectType)return $(".preloader_sub_inputs").css("display","none");$(".preloader_sub_inputs").css("display","none"),$(`.${selectType.toLowerCase()}_container`).fadeIn()}function addNewTask(){let taskInfos=Array.from($(".new_task_info")),taskDates=Array.from($(".new_task_date")),storeTT=[],taskLength=taskInfos.length,valid=!0;for(let i=0;i<taskLength;i++)""==$(taskInfos[i]).val().trim()?(alertify.alert("Message!","Please enter task info...."),valid=!1,$(taskInfos[i])[0].focus()):""==$(taskDates[i]).val()?(alertify.alert("Message!","Please select date...."),$(taskDates[i])[0].focus(),valid=!1):storeTT.push([$(taskInfos[i]).val(),$(taskDates[i]).val()]);if(1==valid){showLoader(),console.log(storeTT),$("#add_task_modal").modal("hide");const ex_ma={manager:logUserDatas.manager,user:logUserDatas.emp_name};addtask(storeTT,ex_ma).then(r=>{console.log("ne",r),scroll_down("#pending_card_list_container"),alertify.success("New task added successfully")}),hideLoader()}}function assignTask(){let info=$("#assign_task_info").val(),mbName=$("#assing_mmb_value").val();info.trim()?mbName?(showLoader(),$("#assign_task_modal").modal("hide"),assignNewTask(info,mbName,logUserDatas.emp_name).then(ass_task=>{console.log(ass_task,"sdfasdf");const sub_notify_value={tabs:"auto",software:"TASK",action:"Assign Task",message:"Task has been assigned by "+logUserDatas.emp_name,click:"Click",receiver:ass_task.data.user_name};addNotify_func(ass_task.data,sub_notify_value),auto_move_tab("managing");const managing_tab_filter={fill_name:mbName,fill_status:"Scheduling",sub_users:""};setTimeout(()=>{const select_card=$(`[data-card-container-managing=${ass_task.data.token}]`);moving_card("#managing_card_list_container",select_card)},2e3),$("#task_managing_name_sort").val(mbName),$("#task_managing_status_sort").val("Scheduling"),managing_main_filter(managing_tab_filter,!1),alertify.success(" Task assigned successfully")}),hideLoader()):alertify.alert("Message!","Please select name...."):alertify.alert("Message!","Please enter info....")}function preloaderTask(){const selecttype=$("#preloader_type_value").val(),infoe=$("#preloader_info_value").val();if(!infoe.trim())return alertify.alert("Message!","Please enter task info....");console.log(selecttype,infoe);const preloaderObjec={type:selecttype,info:infoe,user:logUserDatas.emp_name};if("Weekly"==selecttype){const t1=$("#preloader_type_weekly").val();preloaderObjec.weeklyDay=t1,addPreloadertask(preloaderObjec)}else if("Monthly"==selecttype){const m1=$("#preloader_type_monthly_month").val(),m2=$("#preloader_type_monthly_date").val();if(!m2)return alertify.alert("Message!","Please enter date....");preloaderObjec.month=m1,preloaderObjec.date=m2,addPreloadertask(preloaderObjec)}else if("Yearly"==selecttype){const date=$("#preloader_type_yearly").val();if(!date)return alertify.alert("Message!","Please Select Date....");preloaderObjec.yeardate=date,addPreloadertask(preloaderObjec)}else"Daily"==selecttype&&addPreloadertask(preloaderObjec)}function addPreloadertask(obj){showLoader(),$("#preloader_task_modal").modal("hide"),addPreLoad(obj,logUserDatas).then(preloadEs=>{if(0==preloadEs.status)return alertify.alert("Message!",preloadEs.message);makePreloaderCard([preloadEs.data],!1),scroll_down("#preloader_card_list_container"),alertify.success("Preloader task added successfully")}),hideLoader()}function selectInputs_value(){const sub_ar=logUserDatas.subordinates_details.ad,allsub_ar=logUserDatas.allsubordinates.as;if(console.log(allsub_ar),0==sub_ar.length)$(".admin_c_tab").addClass("d-none");else{let sub_option;$(".admin_c_tab").removeClass("d-none");let sub_option_all='<option value="All" selected>All</option>';sub_ar.forEach(sub=>{sub_option+=`<option value="${sub.subname}">${sub.subname}</option>`,sub_option_all+=`<option value="${sub.subname}">${sub.subname}</option>`}),$("#assing_mmb_value").append(sub_option),$("#task_managing_name_sort,#task_approval_name_sort").append(sub_option_all);let all_sub_a='<option value="All" selected >All</option>';allsub_ar.forEach(alsub=>{all_sub_a+=`<option value="${alsub}"  >${alsub}</option>`}),$("#task_manage_name_sort").html(all_sub_a)}}checkForCookie("key"),$(".bell_icon_container").click((function(){const badge=$(".notification-active");$(badge).hasClass("d-none")||$(badge).addClass("d-none")})),$(".select_software_tag").click((function(){$(".left-side-bar").removeClass("open"),$(".mobile-menu-overlay").removeClass("show");const sotfware=$(this).attr("data-render");get_template(sotfware),$(".select_software_tag").removeClass("active"),$(this).hasClass("side_link_tag")&&($(".side_link_tag").removeClass("active"),$(this).addClass("active"))}));var menu_card_objects={};function task_menu_icons(e){const select_append_tab=$(e).parent().parent().parent().parent().parent().next();if(console.log(select_append_tab,"see"),$(select_append_tab).children().eq(0).hasClass("options_cc_container"))$(select_append_tab).empty(),$(e).children("i")[0].outerHTML='<i class="dw dw-down-arrow-4"></i>';else{refreshCard(),$(e).children("i")[0].outerHTML='<i class="dw dw-up-arrow"></i>';const loaderSp='<div style="text-align: center;" class="my-2"><div class="spinner-border text-success" role="status"><span class="visually-hidden">Loading...</span></div></div>',tab=$(e).attr("data-tab"),token=$(e).attr("data-modify"),card_user=$(e).attr("data-card-owner"),obj={user_name:card_user,token:token};$(e).children(".red_dt_cls").addClass("d-none"),console.log($(e).parent().parent()),$(e).parent().parent().next().children(".red_dt_cls").addClass("d-none"),$(select_append_tab).html(loaderSp),read_update_notification(token),console.log(notification_data_ar,"dddd"),notification_data_ar=notification_data_ar.filter(notify=>notify.doc_id!=token),$(".notification-active").addClass("d-none"),modifyIcon(obj).then(task_data=>{if(1==task_data.status){const append_options_container=modify_make_container(task_data.data,tab);$(select_append_tab).html(append_options_container),menu_card_objects=task_data.data;const card=$(e).parent().parent().parent().parent().parent().parent(),cardparent=$(e).parent().parent().parent().parent().parent().parent().parent();window.setTimeout((function(){var a=card[0].offsetTop;$(cardparent).stop().animate({scrollTop:a},10)}),100)}else alertify.alert("!Message","Please Try Again....")})}}function editTask(e){const card_store_value=menu_card_objects,editText=$("#modify_edit_input").val();if(console.log(card_store_value),card_store_value.task_description==editText)return alertify.alert("Messsage!","Same Descriptions....!");if(""==editText.trim())return alertify.alert("Message!","Please enter task info");const edit_obj={user:card_store_value.user_name,token:card_store_value.token,editText:editText};$("#task_edit_modity_modal").modal("hide"),$(e).html(button_loader),editTaskInfo(edit_obj).then(tass=>{if(1==tass.status&&"Assign"==card_store_value.card_type){console.log(tass);const wDcard=tass.data,modify_make=makeTaskCard(wDcard,"managing"),find_tag=$(`.card_template_main[data-card-container-managing=${wDcard.token}]`);console.log(find_tag),find_tag&&(find_tag[0].outerHTML=modify_make)}alertify.success("Info edited successfully")});let receiverE="";"Assign"==card_store_value.card_type&&(receiverE=card_store_value.user_name);const sub_notify_value={tabs:"auto",software:"TASK",action:"Edit Task",message:"Task has been edited by "+logUserDatas.emp_name,click:"Click",receiver:receiverE};addNotify_func(card_store_value,sub_notify_value),hideLoader()}function scheduleTask(){const card_store_value=menu_card_objects,scheduleDate=$("#modify_task_schedule_input").val();if(""==scheduleDate)return alertify.alert("Message!","Please select schedule date....!");const edit_obj={user:card_store_value.user_name,token:card_store_value.token,schedule_date:new Date(scheduleDate)},sub_notify_value={tabs:"auto",software:"TASK",action:"Schedule Task",message:"Task has been scheduled by "+logUserDatas.emp_name,click:"Click",receiver:""};addNotify_func(card_store_value,sub_notify_value),alertify.success("Task scheduled successfully"),$("#task_schedule_modity_modal").modal("hide"),showLoader(),scheduleTask_backend(edit_obj),hideLoader()}function deleteTask(){const card_store_value=menu_card_objects,edit_obj={user:card_store_value.user_name,token:card_store_value.token};let receiverE="";"Assign"==card_store_value.card_type&&(receiverE=card_store_value.user_name);const sub_notify_value={tabs:"auto",software:"TASK",action:"Delete Task",message:"Task has been deleted by "+logUserDatas.emp_name,click:"Non-Click",receiver:receiverE};addNotify_func(card_store_value,sub_notify_value),$("#task_delete_modity_modal").modal("hide"),"Assign"==card_store_value.card_type&&$(`.card_template_main[data-card-container-managing=${edit_obj.token}]`).remove(),showLoader(),taskDelete(edit_obj);const addD={...card_store_value,cre:card_store_value.created_on.toDate(),sch:card_store_value.scheduled_On.toDate()};deleteTaskappend({deleteData:addD,func:"deleteTask"}),alertify.success("Task deleted successfully"),hideLoader()}function deleteTaskappend(params){return fetch("https://script.google.com/macros/s/AKfycbx5sJ4xzRxk7c0kmo_mFJosMtiKO0xHvREFTgXOhNEiPZJ6kPn_HC-78NJyV3WGwJ37BQ/exec",{method:"post",body:JSON.stringify(params)}).then(responsedata=>{responsedata.json(result=>{console.log(result)})})}function deleted_task_all(data){$(`.card_template_main[data-card-container-pending=${data.token}]`).remove(),task_pending_tab_status_ls=task_pending_tab_status_ls.filter(eTask=>eTask.token!=data.token);const pard=Array.from($("#pending_card_list_container").children(".card_template_main"));0==pard.length&&$("#pending_card_list_container").html(no_record),task_pending_tab_set_counts()}function completedTask(){const card_store_value=menu_card_objects,edit_obj={user:card_store_value.user_name,token:card_store_value.token,comD:card_store_value.completed_on},sub_notify_value={tabs:"auto",software:"TASK",action:"Completed Task",message:"Task has been completed by "+logUserDatas.emp_name,click:"Click",receiver:""};addNotify_func(card_store_value,sub_notify_value),$("#task_completed_modity_modal").modal("hide"),showLoader(),completeTask(edit_obj).then(compTask=>{hideLoader(),alertify.success("Task completed  successfully")})}function restoreTask(){const card_store_value=menu_card_objects,edit_obj={user:card_store_value.user_name,token:card_store_value.token,comD:card_store_value.completed_on};$("#task_restore_modity_modal").modal("hide");const sub_notify_value={tabs:"auto",software:"TASK",action:"Restore Task",message:"Task has been Restore by "+logUserDatas.emp_name,click:"Click",receiver:""};showLoader(),addNotify_func(card_store_value,sub_notify_value),restoreTask_backend(edit_obj).then(restore=>{if(0==restore.status)return alertify.alert("Message!",restore.message);alertify.success(restore.message)}),hideLoader()}function extendTask(){const card_store_value=menu_card_objects,exDate=$("#modify_extend_date").val();if(""==exDate)return alertify.alert("Message!","Please selecet extend date....!");const edit_obj={user:card_store_value.user_name,token:card_store_value.token,ex_ar:card_store_value.extended_on,ex_date:new Date(exDate)},sub_notify_value={tabs:"Approval",software:"TASK",action:"Extends Task",message:"Requesting for task extension from "+logUserDatas.emp_name,click:"Click",receiver:""};console.log(card_store_value,sub_notify_value,"df"),addNotify_func(card_store_value,sub_notify_value),$("#task_extend_modity_modal").modal("hide"),showLoader(),extendTask_backend(edit_obj),alertify.success("Task extended successfully"),hideLoader(),console.log(exDate)}function checkAppr_card(id){const ce_ee=Array.from($(`#${id} .card_template_main`));0==ce_ee.length&&$(`#${id}`).html(no_record)}function approvalTask(){const appval_status1=$("#approval1")[0].checked,appval_status2=$("#approval2")[0].checked;var approved;approved=1==appval_status1;const card_store_value=menu_card_objects,edit_obj={user:card_store_value.user_name,token:card_store_value.token,status:approved,ex_on_ar:card_store_value.extended_on},sub_notify_value={tabs:"auto",software:"TASK",action:"Approved Task",message:"Task has been verified by "+logUserDatas.emp_name,click:"Click",receiver:card_store_value.user_name};addNotify_func(card_store_value,sub_notify_value),approval_tab_type_ls=approval_tab_type_ls.filter(appr=>appr.token!=card_store_value.token),task_approval_tab_set_counts(),$("#task_approval_modity_modal").modal("hide"),showLoader(),console.log(card_store_value,"dfsdf"),$(`.card_template_main[data-card-container-approval=${card_store_value.token}]`).remove(),checkAppr_card("approval_card_list_container"),approvetask(edit_obj),hideLoader()}function uploadeTask(e){const card_store_value=menu_card_objects,uploadFile=$("#task_upload_input"),files=uploadFile[0].files;if(0==files.length)return alertify.alert("Message!","Please select file..!");console.log(files);const upload_data={user:logUserDatas.emp_name,uploade_files:files,token:card_store_value.token};let receivarE="";card_store_value.manager==logUserDatas.emp_name&&(receivarE=card_store_value.user_name);const sub_notify_value={tabs:"auto",software:"TASK",action:"Uploade Task",message:"Task has been uploaded by "+logUserDatas.emp_name,click:"Click",receiver:receivarE};$("#task_upload_modity_modal").modal("hide"),showLoader(),addNotify_func(card_store_value,sub_notify_value),$(e).html('<div class="spinner-border text-light" role="status" style="width:20px;height:20px;"><span class="visually-hidden">Loading...</span></div>'),uploader(files,card_store_value).then(fs=>{refreshCard(),alertify.success("File uploaded successfully....")}),hideLoader(),console.log(upload_data)}function refreshCard(){$(".options_append_tab").empty(),$(".menu_tag_class").children("i").removeClass("dw dw-up-arrow"),$(".menu_tag_class").children("i").addClass("dw dw-down-arrow-4")}function getDownFile(){const card_store_value=menu_card_objects,downloadFile=card_store_value.file_details;$(".download_append").empty(),hideLoader(),0==downloadFile.length?$(".download_append").html(' <h5 class="text-center w-100">No Files</h5>'):downloadFile.forEach(async down=>{const downUrl=await down.url;console.log(down);let downUI=`<div class="down_file text-center">\n                <div class="down_file_icon">\n                   <i class="icon-copy dw dw-file"></i>\n                </div>\n                <div class="down_file_name">\n                   <a href="${downUrl}" download="${down.fileName}" target="_blank" > <samp>${down.fileName}</samp></a>\n                </div>\n            </div>`;console.log(down),$(".download_append").append(downUI)})}function preloaderTask_update(){const selecttype=$("#preloader_type_value").val(),infoe=$("#preloader_info_value").val();if(!infoe.trim())return alertify.alert("Message!","Please enter task info...."),{status:!1};{const preloaderObjec={type:selecttype,info:infoe,user:logUserDatas.emp_name};if("Weekly"==selecttype){const t1=$("#preloader_type_weekly").val();return preloaderObjec.weeklyDay=t1,{status:!0,data:preloaderObjec}}if("Monthly"==selecttype){const m1=$("#preloader_type_monthly_month").val(),m2=$("#preloader_type_monthly_date").val();return m2?(preloaderObjec.month=m1,preloaderObjec.date=m2,{status:!0,data:preloaderObjec}):(alertify.alert("Message!","Please enter date...."),{status:!1})}if("Yearly"==selecttype){const date=$("#preloader_type_yearly").val();return date?(preloaderObjec.yeardate=date,{status:!0,data:preloaderObjec}):(alertify.alert("Message!","Please Select Date...."),{status:!1})}if("Daily"==selecttype)return{status:!0,data:preloaderObjec}}}function preloaderTaskEdit(){const getDt=preloaderTask_update(),cardEE=preloader_obj;if(getDt.status){showLoader();const pre={user:logUserDatas.emp_name,token:cardEE.token};console.log(pre,"dddd",getDt.data),updatePreloaderCard(pre,getDt.data).then(updatePreloader=>{hideLoader(),$("#preloader_task_modal").modal("hide");const maked=makePreloadTask_card_ui(updatePreloader.data,!1),replaceTag=$(`.card_template_main[data-card-container-preloader=${updatePreloader.data.token}]`);console.log(replaceTag,updatePreloader),replaceTag[0].outerHTML=maked,console.log(updatePreloader,"update")})}}function deletePreloaderTask(){const delData=preloader_obj;showLoader(),deletePreloaderCard({user:logUserDatas.emp_name,token:delData.token}).then(del=>{hideLoader(),$("#preloadertask_delete_modity_modal").modal("hide");const replaceTag=$(`.card_template_main[data-card-container-preloader=${delData.token}]`);preloader_tab_type_ls=preloader_tab_type_ls.filter(prel=>prel.token!=delData.token),$(replaceTag).remove(),preloader_cx_count_set(),checkAppr_card("preloader_card_list_container")})}function modify_make_container_preloader(taskData,tab){let task_card='  <div class="border-top mt-2 options_cc_container">\n    <div class="pd-20">\n        <div class="tab">\n            <div class="row clearfix align-items-start" style="background: #ecf0f4;">\n                <div class="col-md-3 col-sm-12">\n                    <ul class="nav flex-column nav-pills vtabs" role="tablist">\n                        <li class="nav-item">\n                            <a class="nav-link active" data-toggle="tab" href="#delete_icon" role="tab" aria-selected="false"><i class="dw dw-eye"></i> Delete</a>\n                        </li>\n                        <li class="nav-item">\n                            <a class="nav-link " data-toggle="tab" href="#edit_icon" role="tab" aria-selected="false" onclick="preloader_edit_prefil()"><i class="dw dw-eye"></i> Edit</a>\n                        </li>\n                       ';return task_card+=`</ul>\n                </div>\n                <div class="col-md-9 col-sm-12">\n\n                    <div class="tab-content page-header my-2">\n\n                            <div class="tab-pane fade show active" id="delete_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form_preloader">\n                                            <div class="form-group">\n                                                <label>Task Info</label>\n                                                <input class="form-control prealoder_info_view " type="text" value="${taskData.preInfo}" readonly="">\n                                            </div>\n                                        </form>\n                                        <div class="text-right">\n                                            <button class="btn btn-sm btn-danger" onclick="deletePreloaderTask(this)">Delete</button>\n                                    </div>\n                                    </div>\n                                </div>\n                            </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>`,task_card}function preloader_menu(e){console.log("dsfas");const token=$(e).attr("data-modify-token"),getPre={user:logUserDatas.emp_name,token:token},select_append_tab=$(e).parent().parent().parent().parent().next();if($(select_append_tab).children().eq(0).hasClass("options_cc_container"))$(select_append_tab).empty(),$(e).children("i")[0].outerHTML='<i class="dw dw-down-arrow-4"></i>';else{$(".options_append_tab").empty(),$(".menu_tag_class").children("i").removeClass("dw dw-up-arrow"),$(".menu_tag_class").children("i").addClass("dw dw-down-arrow-4"),$(e).children("i")[0].outerHTML='<i class="dw dw-up-arrow"></i>';const loaderSp='<div style="text-align: center;" class="my-2"><div class="spinner-border text-success" role="status"><span class="visually-hidden">Loading...</span></div></div>';$(select_append_tab).html(loaderSp),getPreloaderCard(getPre).then(preData=>{if(hideLoader(),console.log(preData),preData.status){const preloaderCard=preData.data;preloader_obj=preloaderCard;const append_options_container=modify_make_container_preloader(preloaderCard);console.log(append_options_container,select_append_tab),$(select_append_tab).html(append_options_container);const card=$(e).parent().parent().parent().parent().parent(),cardparent=$(e).parent().parent().parent().parent().parent().parent();window.setTimeout((function(){var a=card[0].offsetTop;$(cardparent).stop().animate({scrollTop:a},10)}),100)}else alertify.alert("Message!","Please Try Again...")})}}function preloader_edit_prefil(){const preloaderCard=preloader_obj;$("#preloaderChange_task_confirm_btn").removeClass("d-none"),$("#preloader_task_confirm_btn").addClass("d-none"),$("#preloader_info_value").val(preloaderCard.preInfo),$("#preloader_task_modal").modal("show"),$(".preloader_sub_inputs").css("display","none"),$("#preloader_type_value").val(preloaderCard.preTpye),"Weekly"==preloaderCard.preTpye?($(".weekly_container").fadeIn(),$("#preloader_type_weekly").val(preloaderCard.preDay)):"Monthly"==preloaderCard.preTpye?($(".monthly_container").fadeIn(),$("#preloader_type_monthly_month").val(preloaderCard.preMonth),$("#preloader_type_monthly_date").val(preloaderCard.preDate)):"Yearly"==preloaderCard.preTpye&&($(".yearly_container").fadeIn(),$("#preloader_type_yearly").val(preloaderCard.preyear))}function makeTaskCard(taskData,tab){let create_date=taskData.created_on.toDate(),schedule_date,extend_date,completed_date;create_date=new Date(create_date).toDateString(),"Scheduling"!=taskData.card_status&&(schedule_date=taskData.scheduled_On.toDate(),schedule_date=new Date(schedule_date).toDateString()),"Approved"==taskData.card_status&&(extend_date=new Date(taskData.extended_on[taskData.extended_on.length-1].date.toDate()).toDateString()),"Completed"==taskData.card_status&&(completed_date=new Date(taskData.completed_on[taskData.completed_on.length-1].date.toDate()).toDateString());let sub_s=taskData.sub_status,noOfEx=!1;"empty"!=taskData.extended_on[0]&&(noOfEx=taskData.extended_on.length);let delayBg=!1;""!=taskData.delay&&(delayBg="Delayed Task");let chat=!1,task=!1;chat=notification_data_ar.some(eR=>"Chat"==eR.icon&&eR.doc_id==taskData.token),task=notification_data_ar.some(eR=>"Chat"!=eR.icon&&eR.doc_id==taskData.token);var task_card=` <li class=" card-box mb-2   border-bottom card_template_main" data-card-container-${tab}="${taskData.token}" >\n  <div class="d-flex align-items-center justify-content-between"> <div class="name-avatar d-flex align-items-center ml-2">\n  <div>\n       <div>\n           <div  data-modify="${taskData.token}" data-tab="${tab}" data-card-owner="${taskData.user_name}">\n               <span class="menu_tag_class" onclick="task_menu_icons(this)" data-modify="${taskData.token}" data-tab="${tab}" data-card-owner="${taskData.user_name}" >\n               <i class="dw dw-down-arrow-4"></i>`;return task_card+=1==task?'<div class="red_dt_cls" style="transform: translate(15px, -20px);"></div>':'<div class="red_dt_cls d-none" style="transform: translate(15px, -20px);"></div>',task_card+=`</span>\n              \n           </div>\n       </div>\n       <div class="cta flex-shrink-0 mx-3 chat_menu_cls" data-modify="Chat" data-chat-token="${taskData.token}"  >`,task_card+=1==chat?'<div class="red_dt_cls bg-success" style="transform: translate(0px, -20px);"></div>':'<div class="red_dt_cls d-none bg-success" style="transform: translate(0px, -20px);"></div>',task_card+=`</div>\n      </div>\n       <div class="txt">\n           <div>\n               <span class="badge badge-pill badge ${taskData.card_status.toLowerCase().replaceAll(" ","_")}_badge_cls" style=" background-color: rgb(231, 235, 245);">${taskData.card_status}</span>\n               <span class="badge badge-pill badge ${taskData.card_type.toLowerCase().replaceAll(" ","_")}_badge_cls mx-1" style=" background-color: rgb(231, 235, 245);">${taskData.card_type}</span>`,"managing"!=tab&&"approval"!=tab&&"manage"!=tab||(task_card+=`<span class="badge badge-pill badge text-dark ml-1" style=" background-color: rgb(231, 235, 245);">${taskData.user_name}</span>`),"Rejected"==sub_s&&(task_card+=`<span class="badge badge-pill badge text-danger ml-1" style=" background-color: rgb(231, 235, 245);">${sub_s}</span>`),0!=delayBg&&(task_card+=`<span class="badge badge-pill badge text-danger ml-1" style=" background-color: rgb(231, 235, 245);">${delayBg}</span>`),0!=noOfEx&&(task_card+=`<span class="badge badge-pill badge text-danger ml-1" style=" background-color: rgb(231, 235, 245);">No.of.extension ${noOfEx}</span>`),task_card+=`</div>\n           <div class=" weight-600 card_info_text my-1">${taskData.task_description}</div>`,"Scheduling"==taskData.card_status?task_card+=`<div class="font-12 weight-500 card_schedule_date"  style="color: rgb(79 78 82);">\n                                 <span><span><b class="text-success">Created Date</b> :${create_date}</span></span>\n                         </div>`:"Approved"==taskData.card_status?task_card+=`<div class="font-12 weight-500 card_schedule_date"  style="color: rgb(79 78 82);">\n                         <span><span><b class="text-success">Extended Date</b> : ${extend_date}</span></span>\n                 </div>`:"Completed"==taskData.card_status?task_card+=`<div class="font-12 weight-500 card_schedule_date"  style="color: rgb(79 78 82);">\n                         <span><span><b class="text-success">Completed Date</b> : ${completed_date}</span></span>\n                 </div>`:task_card+=`<div class="font-12 weight-500 card_schedule_date"  style="color: rgb(79 78 82);">\n                         <span><span><b class="text-success">Scheduled Date</b> : ${schedule_date}</span></span>\n                 </div>`,task_card+='</div>\n   </div>\n\n   </div>\n   <div class="options_append_tab"></div>\n</li>'}function modify_make_container(taskData,tab){let create_date=taskData.created_on.toDate();create_date=new Date(create_date).toDateString();let schedule_date="---",extend_date,extend_date_e;"Scheduling"!=taskData.card_status&&(schedule_date=taskData.scheduled_On.toDate(),schedule_date=new Date(schedule_date).toDateString()),"Approved"==taskData.card_status&&(extend_date=new Date(taskData.extended_on[taskData.extended_on.length-1].date.toDate()).toDateString()),"Awaiting Approval"==taskData.card_status&&(extend_date_e=new Date(taskData.extended_on[taskData.extended_on.length-1].date.toDate()).toDateString());let completed_date=!1;"Completed"==taskData.card_status&&(completed_date=new Date(taskData.completed_on[taskData.completed_on.length-1].date.toDate()).toDateString());let download_file=!1;"empty"!=taskData.file_details[0]&&(download_file=!0);let task_card='  <div class="border-top mt-2 options_cc_container">\n    <div class="pd-20 ">\n        <div class="tab">\n            <div class="row clearfix align-items-start" style="background: #ecf0f4;">\n                <div class="col-md-3 col-sm-12">\n                    <ul class="nav flex-column nav-pills vtabs" role="tablist">\n                        <li class="nav-item">\n                            <a class="nav-link active" data-toggle="tab" href="#view_icon" role="tab" aria-selected="false"><i class="dw dw-eye"></i> View</a>\n                        </li>';return"pending"!=tab&&"managing"!=tab&&"approval"!=tab||(("Self"!=taskData.card_type||logUserDatas.emp_name!=taskData.user_name||"Pending"!=taskData.card_status&&"Approved"!=taskData.card_status)&&("Assign"!=taskData.card_type||logUserDatas.emp_name!=taskData.manager||"Pending"!=taskData.card_status&&"Approved"!=taskData.card_status)||(task_card+='<li class="nav-item">\n                                                     <a class="nav-link" data-toggle="tab" href="#edit_icon" role="tab" aria-selected="false"><i class="dw dw-edit2"></i> Edit</a>\n                                              </li>',"Pending"!=taskData.card_status&&"Approved"!=taskData.card_status||(task_card+='<li class="nav-item">\n                                                         <a class="nav-link " data-toggle="tab" href="#delete_icon" role="tab" aria-selected="true"><i class="dw dw-delete-3"></i> Delete</a>\n                                                  </li>')),"Scheduling"==taskData.card_status&&logUserDatas.emp_name==taskData.user_name&&(task_card+='<li class="nav-item">\n                                                <a class="nav-link " data-toggle="tab" href="#schedule_icon" role="tab" aria-selected="true"><i class="dw dw-time-management"></i> Schedule</a>\n                                             </li>'),"Approved"!=taskData.card_status&&"Pending"!=taskData.card_status||taskData.user_name!=logUserDatas.emp_name||(task_card+='<li class="nav-item">\n                                                     <a class="nav-link " data-toggle="tab" href="#complete_icon" role="tab" aria-selected="true"><i class="dw dw-tick"></i> Complete</a>\n                                                  </li>'),"Completed"==taskData.card_status&&taskData.user_name==logUserDatas.emp_name&&(task_card+='<li class="nav-item">\n                                                    <a class="nav-link " data-toggle="tab" href="#restore_icon" role="tab" aria-selected="true"><i class="dw dw-refresh1"></i> Restore</a></a>\n                                             </li>'),"Pending"!=taskData.card_status&&"Approved"!=taskData.card_status||taskData.user_name!=logUserDatas.emp_name||(task_card+='<li class="nav-item">\n                                                    <a class="nav-link " data-toggle="tab" href="#extend_icon" role="tab" aria-selected="true"><i class="dw dw-wall-clock2"></i> Extend</a>\n                                                </li>'),"Awaiting Approval"==taskData.card_status&&logUserDatas.emp_name==taskData.manager&&(task_card+='<li class="nav-item">\n                                                    <a class="nav-link " data-toggle="tab" href="#approval_icon" role="tab" aria-selected="true"><i class="dw dw-check"></i> Approval</a>\n                                                </li>'),"managing"!=tab&&"pending"!=tab||"Pending"!=taskData.card_status&&"Approved"!=taskData.card_status&&"Awaiting Approval"!=taskData.card_status||(task_card+='<li class="nav-item">\n                                                    <a class="nav-link " data-toggle="tab" href="#upload_icon" role="tab" aria-selected="true"><i class="dw dw-upload1"></i> Upload</a>\n                                                </li>')),download_file&&(task_card+='<li class="nav-item">\n                                            <a class="nav-link " data-toggle="tab" href="#download_icon" role="tab" aria-selected="true" onclick="getDownFile()"><i class="dw dw-download1"></i> Download</a>\n                                        </li>'),task_card+=`<li class="nav-item">\n                            <a class="nav-link " data-toggle="tab" href="#chat_icon" role="tab" aria-selected="true" data-chat-token="${taskData.token}" data-owner="${taskData.user_name}" data-tab="${tab}" onclick="chat_menu_button(this)" ><i class="dw dw-chat"></i> Chat</a></a>\n                        </li>`,task_card+=`</ul>\n                </div>\n                <div class="col-md-9 col-sm-12 d-flex align-items-center justify-content-center">\n\n                    <div class="tab-content page-header my-2" style="width:90%">\n    \n                            <div class="tab-pane fade show active" id="view_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                    <table class="table">\n                                    <tbody>\n                                    <tr>\n                                        <th scope="row">Task Owner</th>\n                                        <td colspan="2">${taskData.user_name}</td>\n                                      </tr>\n                                      <tr>\n                                        <th scope="row">Status</th>\n                                        <td>${taskData.card_status}</td>\n                                      </tr>\n                                      <tr>\n                                        <th scope="row">Manager</th>\n                                        <td>${taskData.manager}</td>\n                                      </tr>\n                                      <tr>\n                                        <th scope="row">Created  on</th>\n                                        <td colspan="2">${create_date}</td>\n                                      </tr>\n                                      <tr>\n                                        <th scope="row">Scheduled on</th>\n                                        <td colspan="2">${schedule_date}</td>\n                                      </tr>`,0!=completed_date&&(task_card+=`<tr>\n                                        <th scope="row">Completed on</th>\n                                        <td colspan="2">${completed_date}</td>\n                                      </tr>`),task_card+=`</tbody>\n                                  </table>\n                                        \n                                    </div>\n                                </div>\n                            </div>\n\n                     \n                            <div class="tab-pane fade" id="edit_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form ">\n                                            <div class="form-group">\n                                                <label>Task Info</label>\n                                                <input class="form-control modify_task_info_input" type="text" value="${taskData.task_description}" id="modify_edit_input">\n                                            </div>\n                                        </form>\n                                        <div class="text-right">\n                                            <button class="btn btn-sm btn-primary" onclick="editTask(this)">Change</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade" id="delete_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form">\n                                            <div class="form-group">\n                                                <label>Task Info</label>\n                                                <input class="form-control modify_task_info_input" type="text" value="${taskData.task_description}" readonly="">\n                                            </div>\n                                        </form>\n                                        <div class="text-right">\n                                        <button class="btn btn-sm btn-danger" onclick="deleteTask(this)">Delete</button>\n                                    </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="complete_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form">\n                                            <div class="form-group">\n                                                <label>Task Info</label>\n                                                <input class="form-control modify_task_info_input" value="${taskData.task_description}" type="text" readonly="">\n                                            </div>\n                                        </form>\n                                        <div class="text-right">\n                                            <button class="btn btn-sm btn-success" onclick="completedTask()">Complete</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="extend_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form">\n                                                <div class="form-group">\n                                                    <label>Task Info</label>\n                                                    <input class="form-control modify_task_info_input" type="text" value="${taskData.task_description}" readonly="">\n                                                </div>\n                                                <div class="form-group">\n                                                    <label>Previous Date</label>\n                                                    <input class="form-control modify_task_schedule_input" type="text" value="${schedule_date}" readonly="">\n                                                </div>\n                                                <div class="form-group">\n                                                    <label>New Date</label>\n                                                    <input class="form-control" type="date" id="modify_extend_date" onchange="checkPreDate(this)">\n                                                </div>\n                                     </form>\n                                        <div class="text-right">\n                                        <button class="btn btn-sm btn-primary" onclick="extendTask()">Submit</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="schedule_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form">\n                                            <div class="form-group">\n                                                <label>Task Info</label>\n                                                <input class="form-control modify_task_info_input " value="${taskData.task_description}" type="text" readonly="">\n                                            </div>\n                                            <div class="form-group">\n                                                <label>Schedule Date</label>\n                                                <input class="form-control empty_value_input " type="date" id="modify_task_schedule_input" onchange="checkPreDate(this)">\n                                            </div>\n                                        </form>\n                                        <div class="text-right">\n                                              <button class="btn btn-sm btn-primary" onclick="scheduleTask()">Submit</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="download_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                    <div class="down_container">\n                                      <div class="download_append d-flex px-2"> <h5 class="text-center w-100">No Files</h5></div>\n                                   </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="upload_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form ">\n                                            <div class="form-group">\n                                                <label>Task Info</label>\n                                                <input class="form-control modify_task_info_input" type="text" value="${taskData.task_description}" readonly="">\n                                            </div>\n                                            <div class="form-group">\n                                                <label>Custom file input</label>\n                                                <div class="custom-file">\n                                                    <input type="file" class="custom-file-input" id="task_upload_input" multiple="">\n                                                    <label class="custom-file-label">Choose file</label>\n                                                </div>\n                                            </div>\n                                        </form>\n                                        <div class="text-right">\n                                        <button class="btn btn-sm btn-primary" onclick="uploadeTask(this)">Upload</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="approval_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                     <form class="modify_form">\n                                            <div class="form-group">\n                                                <label>Task info</label>\n                                                <input class="form-control modify_task_info_input" type="text" value="${taskData.task_description}" readonly="">\n                                            </div>\n\n                                            <div class="form-group">\n                                                <label>Previous Date</label>\n                                                <input class="form-control modify_task_schedule_input" value="${schedule_date}" type="text" readonly="">\n                                            </div>\n\n                                            <div class="form-group">\n                                                <label>New Date</label>\n                                                <input class="form-control extend_date_input" type="text" value="${extend_date_e}"  readonly="">\n                                            </div>\n                        \n                                            <div class="col-md-6 col-sm-12">\n                                                <label class="weight-600">Select</label>\n                                                <div class="custom-control custom-radio mb-5">\n                                                    <input type="radio" id="approval1" name="approval_radio"  class="custom-control-input" checked="">\n                                                    <label class="custom-control-label" for="approval1">Approval</label>\n                                                </div>\n\n                                                <div class="custom-control custom-radio mb-5">\n                                                    <input type="radio" id="approval2" name="approval_radio" class="custom-control-input">\n                                                    <label class="custom-control-label" for="approval2">Disapproval</label>\n                                                </div>\n                                            </div>\n\n                                     </form>\n                                        <div class="text-right">\n                                           <button class="btn btn-sm btn-primary" onclick="approvalTask()">Submit</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="restore_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                        <form class="modify_form">\n                                            <div class="form-group">\n                                                <label>Task Info</label>\n                                                <input class="form-control modify_task_info_input" type="text" value="${taskData.task_description}" readonly="">\n                                            </div>\n                                      </form>\n                                        <div class="text-right">\n                                             <button class="btn btn-sm btn-primary" onclick="restoreTask()">Restore</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="tab-pane fade " id="chat_icon" role="tabpanel">\n                                <div class="">\n                                    <div>\n                                    <div class="p-2 chat_CS  ">\n                                    <div class=" h-100">\n                                        <div class="chat_container ">\n                                            <div class="chat_box_container ">\n                                                <div class="chat_box  ">\n                                                    \x3c!-- <div class="chat_box_header">Chat</div> --\x3e\n                                                    <div class="chat_box_body ">\n                                                        <div class="chat_box_content ">\n                                                            <div class="chat_box_messages ">\n                                                                <div class="chat_append"><div class="w-100 h-100 d-flex align-items-center justify-content-center no_chat_template p-4"><div class="w-50 h-50 text-center"> <div><img src="https://drive.google.com/uc?export=view&amp;id=10hd-GQbTgi1T06vvGF5_SGuSs_pqYLva" alt="" width="50%" height="50%"></div><div class="no_chat_text my-2"><h6>No Record</h6></div></div></div></div>\n                                                            </div>`,"Completed"!=taskData.card_status&&(task_card+='<div class="chat_input_box_cC">\n                                                                <div class="d-flex align-items-center justify-content-around">\n                                                                    <div class="input_chat_box chat_box_input w-75 position-relative">\n                                                                        <div class="spinner-border text-success chat_spinner" role="status" style="display:none;">\n                                                                            <span class="sr-only">Loading...</span>\n                                                                        </div>\n                                                                        <div class="input_st chatValue" contenteditable="true" disabled="true" onkeyup="enterChatKey(this)"> </div>\n                                                                    </div>\n                                                                    <div class="chat_box_send" onclick="addChat()">\n                                                                        <i class="icon-copy dw dw-paper-plane1"></i>\n                                                                    </div>\n                                                                </div>\n                                                            </div>'),task_card}function preloader_cx_count_set(){const preload_types={daily:[],monthly:[],yearly:[],weekly:[]};preloader_tab_type_ls.filter(preloade_s=>{preload_types[preloade_s.preTpye.toLowerCase()].push(preloade_s)});const typeLength=Object.keys(preload_types);typeLength.forEach(tys=>{$(`.status_count_s_${tys}`).text(preload_types[tys].length)})}function makePreloadTask_card_ui(taskData){var preload_task_ui=`<li class=" card-box mb-2  border-bottom card_template_main" data-card-container-preloader="${taskData.token}" >\n                                    <div class="d-flex justify-content-between align-items-center">\n                                    <div class=" mr-2">\n                                        <div class="">\n                                            <div class="dropdown">\n                                                <span class="p-0 menu_tag_class"   onclick="preloader_menu(this)" data-modify-token="${taskData.token}">\n                                                <i class="dw dw-down-arrow-4"></i>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="name-avatar d-flex align-items-center px-2" style="flex:1;">\n                                        <div class="txt">\n                                            <div>\n                                                <span class="badge badge-pill badge text-primary"  style="background-color: rgb(231, 235, 245);">${taskData.preStatus}</span>\n                                                <span class="badge badge-pill badge text-dark"  style="background-color: rgb(231, 235, 245);">${taskData.preTpye}</span>\n                                            </div>\n                                            <div class=" weight-600 card_info_text my-1">${taskData.preInfo}</div>`;return"Weekly"==taskData.preTpye?preload_task_ui+=`<div class="font-12 weight-500 card_schedule_date"  style="color: rgb(79 78 82);">\n                                                                    <span><span><b class="text-success">Assigned on</b> : ${taskData.preDay}</span></span>\n                                                            </div>`:"Monthly"==taskData.preTpye?preload_task_ui+=`<div class="font-12 weight-500 card_schedule_date"  style="color: rgb(79 78 82);">\n                                                            <span><span><b class="text-success">Assigned on</b> : ${taskData.preMonth+" - "+taskData.preDate}</span></span>\n                                                    </div>`:"Yearly"==taskData.preTpye&&(preload_task_ui+=`<div class="font-12 weight-500 card_schedule_date"  style="color: rgb(79 78 82);">\n                                                            <span><span><b class="text-success">Assigned on</b> : ${taskData.preyear}</span></span>\n                                                    </div>`),preload_task_ui+='</div>\n                                    </div>\n                                    \n                                    </div>\n                                    <div class="options_append_tab"></div>\n                            </li>'}function makePreloaderCard(card_preloader,empty_count){remove_no_RL("#preloader_card_list_container"),empty_count&&(preloader_tab_type_ls=[]),0==card_preloader.length?$("#preloader_card_list_container").html(no_record):card_preloader.filter(preload=>{preloader_tab_type_ls.push(preload);const preloaderCxU=makePreloadTask_card_ui(preload);$("#preloader_card_list_container").append(preloaderCxU)}),preloader_cx_count_set()}function task_pending_tab_set_counts(){const status_list=task_pending_tab_status_ls,task_status_obj={pending:[],approved:[],awaiting_approval:[],scheduling:[]};status_list.filter(status_list=>{"Completed"!=status_list.card_status&&task_status_obj[status_list.card_status.toLowerCase().replaceAll(" ","_")].push(status_list)});const status_D=Object.keys(task_status_obj);status_D.filter(key_status=>{$(`.status_count_s_${key_status}`).text(task_status_obj[key_status].length)})}function task_view_tab_set_counts(){const status_list=view_tab_type_ls,task_status_obj={pending:[],approved:[],awaiting_approval:[],completed:[]};status_list.filter(status_list=>{console.log(status_list.card_status.toLowerCase().replaceAll(" ","_")),task_status_obj[status_list.card_status.toLowerCase().replaceAll(" ","_")].push(status_list)});const status_D=Object.keys(task_status_obj);status_D.filter(key_status=>{$(`.view_count_list_${key_status}`).text(task_status_obj[key_status].length)})}function task_manage_tab_set_counts(){const status_list=manage_tab_type_ls,task_status_obj={pending:[],approved:[],awaiting_approval:[],completed:[]};status_list.filter(status_list=>{console.log(status_list.card_status.toLowerCase().replaceAll(" ","_")),task_status_obj[status_list.card_status.toLowerCase().replaceAll(" ","_")].push(status_list)});const status_D=Object.keys(task_status_obj);status_D.filter(key_status=>{$(`.manage_count_list_${key_status}`).text(task_status_obj[key_status].length)})}function task_managing_tab_set_counts(){const status_list=managing_tab_type_ls,task_status_obj={pending:[],approved:[],completed:[],scheduling:[]};status_list.filter(status_list=>{console.log(status_list.card_status.toLowerCase().replaceAll(" ","_")),task_status_obj[status_list.card_status.toLowerCase().replaceAll(" ","_")].push(status_list)});const status_D=Object.keys(task_status_obj);status_D.filter(key_status=>{$(`.managing_count_list_${key_status}`).text(task_status_obj[key_status].length)})}function task_approval_tab_set_counts(){const status_list=approval_tab_type_ls,task_status_obj={awaiting_approval:[]};status_list.filter(status_list=>{console.log(status_list.card_status.toLowerCase().replaceAll(" ","_")),task_status_obj[status_list.card_status.toLowerCase().replaceAll(" ","_")].push(status_list)});const status_D=Object.keys(task_status_obj);status_D.filter(key_status=>{$(`.approval_count_list_${key_status}`).text(task_status_obj[key_status].length)})}function remove_no_RL(appengingTag){$(appengingTag).children().hasClass("fetching_loader")?$(appengingTag).children(".fetching_loader").remove():$(appengingTag).children().hasClass("no_record_img")&&$(appengingTag).children(".no_record_img ").remove()}function makePendingCard(card_data,callback,empty_count){const appengingTag=$("#pending_card_list_container");if(remove_no_RL(appengingTag),empty_count&&(task_pending_tab_status_ls=[]),0==card_data.length)$(appengingTag).html(no_record);else if(card_data.forEach(task_make_card=>{task_pending_tab_status_ls.push(task_make_card);const makeCard=makeTaskCard(task_make_card,"pending");$(appengingTag).append(makeCard)}),0!=callback){const select_card=$(`[data-card-container-pending=${callback.notification_data.doc_id}]`);moving_card("#pending_card_list_container",select_card)}task_pending_tab_set_counts()}function makeViewCard(view_card_data){remove_no_RL("#view_card_list_container"),view_tab_type_ls=[],0==view_card_data.length?$("#view_card_list_container").html(no_record):view_card_data.filter(view_dD=>{view_tab_type_ls.push(view_dD);const viewW=makeTaskCard(view_dD,"view");$("#view_card_list_container").append(viewW)}),task_view_tab_set_counts()}function makeManageCard(manage_card_data){remove_no_RL("#manage_card_list_container"),manage_tab_type_ls=[],0==manage_card_data.length?$("#manage_card_list_container").html(no_record):manage_card_data.filter(manageD=>{manage_tab_type_ls.push(manageD);const manage=makeTaskCard(manageD,"manage");$("#manage_card_list_container").append(manage)}),task_manage_tab_set_counts()}function makeManagingCard(managing_card_data,callback){if(remove_no_RL("#managing_card_list_container"),managing_tab_type_ls=[],0==managing_card_data.length)$("#managing_card_list_container").html(no_record);else if(managing_card_data.filter(managingE=>{managing_tab_type_ls.push(managingE);const manaagingCaS=makeTaskCard(managingE,"managing");$("#managing_card_list_container").append(manaagingCaS)}),0!=callback){const select_card=$(`[data-card-container-managing=${callback.notification_data.doc_id}]`);moving_card("#managing_card_list_container",select_card),console.log(select_card,"selelcted card"),console.log(callback,"notificaions call back")}task_managing_tab_set_counts()}function makeApprovalCard(approval_card_data,callback,empty_count){if(remove_no_RL("#approval_card_list_container"),empty_count&&(approval_tab_type_ls=[]),0==approval_card_data.length)$("#approval_card_list_container").html(no_record);else if(approval_card_data.filter(approvale=>{approval_tab_type_ls.push(approvale);const approvalsse=makeTaskCard(approvale,"approval");$("#approval_card_list_container").append(approvalsse)}),0!=callback){const select_card=$(`[data-card-container-approval=${callback.notification_data.doc_id}]`);moving_card("#approval_card_list_container",select_card)}task_approval_tab_set_counts()}function modify_card(card_data){const wDcard=card_data[0],modify_make=makeTaskCard(wDcard,"pending"),find_tag=$(`.card_template_main[data-card-container-pending=${wDcard.token}]`);console.log(find_tag),find_tag&&(find_tag[0].outerHTML=modify_make,task_pending_tab_status_ls=task_pending_tab_status_ls.map(rep=>rep.token==wDcard.token?wDcard:rep),task_pending_tab_set_counts()),console.log(find_tag)}function moving_card(appendId,id){var $container=$(appendId),$scrollTo=$(id);$container.animate({scrollTop:$scrollTo.offset().top-$container.offset().top+$container.scrollTop()}),$(id).addClass("bg-secondary"),setTimeout(()=>{$(id).removeClass("bg-secondary")},5e3)}function pending_filter_tag(e){const filter_by={status:$(e).val(),user:logUserDatas.emp_name};pending_main_filter(filter_by,!1)}function pending_main_filter(filter_by,callback){fetch_loader_show("#pending_card_list_container"),pendingTab(filter_by).then(pending_filter_return=>{$("#pending_card_list_container").empty(),0==pending_filter_return.status?makePendingCard([],!1,!1):makePendingCard(pending_filter_return.data,callback,!0),console.log(pending_filter_return)})}function view_filter_tag(){const status=$("#task_view_status_sort").val(),start_date=$("#task_view_start_date").val(),last_date=$("#task_view_end_date").val();if(""==start_date)return alertify.alert("Message!","Please Select From Date...");if(""==last_date)return alertify.alert("Message!","Please Select To Date....");const view_filter_obj={start_date:start_date,last_date:last_date,status:status,user:logUserDatas.emp_name};fetch_loader_show("#view_card_list_container"),viewTask(view_filter_obj).then(view_pre=>{if(console.log(view_pre),$("#view_card_list_container").empty(),1==view_pre.status){const fiterEs=view_pre.data.filter(deS=>"Scheduling"!=deS.card_status);makeViewCard(fiterEs)}else makeViewCard([])})}function manage_filter_tag(){const status=$("#task_manage_status_sort").val(),name=$("#task_manage_name_sort").val(),start_date=$("#manage_filter_start_date").val(),last_date=$("#manage_filter_end_date").val();if(!start_date)return alertify.alert("Message!","Please  select start date...");if(!last_date)return alertify.alert("Message!","Please selcet end date.....");let all_sub;const manage_tab_filter={status:status,name:name,start_date:start_date,last_date:last_date,sub_users:logUserDatas.allsubordinates.as};fetch_loader_show("#manage_card_list_container"),manageTask(manage_tab_filter).then(manage_f=>{if($("#manage_card_list_container").empty(),0==manage_f.status)makeManageCard([]);else{const fileD=manage_f.data.filter(manageRew=>"Scheduling"!=manageRew.card_status);makeManageCard(fileD)}console.log(manage_f,"manag")})}function managing_filter_tag(){const fill_name=$("#task_managing_name_sort").val(),fill_status=$("#task_managing_status_sort").val();let sub_ar=logUserDatas.subordinates_details.ad;0!=sub_ar.length&&(sub_ar=sub_ar.map(sub=>sub.subname));const managing_tab_filter={fill_name:fill_name,fill_status:fill_status,sub_users:sub_ar};managing_main_filter(managing_tab_filter,!1)}function managing_main_filter(managing_tab_filter,callback){fetch_loader_show("#managing_card_list_container"),managingTab(managing_tab_filter).then(managingD=>{if($("#managing_card_list_container").empty(),0==managingD.status)makeManagingCard([],!1);else{const managingEE=managingD.data.filter(manag=>"Awaiting Approval"!=manag.card_status);makeManagingCard(managingEE,callback)}console.log(managingD,"sdfa")})}function approval_filter_tag(e){const name=$(e).val();let sub_ar=logUserDatas.subordinates_details.ad;0!=sub_ar.length&&(sub_ar=sub_ar.map(sub=>sub.subname));const approval_tab_filter={user:name,user_name:logUserDatas.emp_name,sub_name:sub_ar};approval_main_filter(approval_tab_filter,"",!0)}function approval_main_filter(approval_tab_filter,callback){fetch_loader_show("#approval_card_list_container"),approveTab(approval_tab_filter).then(approvalD=>{$("#approval_card_list_container").empty(),0==approvalD.status?makeApprovalCard([],!1,!1):makeApprovalCard(approvalD.data,callback,!0),console.log(approvalD)})}function preloader_filter_tag(e){const valuE=$(e).val(),fE={user:logUserDatas.emp_name,type:valuE};fetch_loader_show("#preloader_card_list_container"),preloaderTab(fE).then(preladerD=>{$("#preloader_card_list_container").empty(),0==preladerD.status?makePreloaderCard([],!0):makePreloaderCard(preladerD.data,!0)})}function chatUI(chatData,appendType){if(0==chatData.length)$(".no_chat_text").html("<h6>No Record</h6>");else{var messageUI="";chatData.forEach(chatArData=>{const chat_date_c=chatArData.chat_date.split("T");chatArData.chat_send_by==logUserDatas.emp_name?messageUI+=`<div class="message_container  mb-3 mLeft extra_task_add_ani">\n             <div class="text-end message_sub_text" >You</div>\n              <div class="chat_content_text">${chatArData.chat_message}</div>\n              <div class="d-flex message_sub_text justify-content-end">\n                  <div class="chat_footer_text  text-end mb-2 align-items-center">${chat_date_c[0]+" - "+chat_date_c[1].slice(0,8)}</div>\n                  <div class="messageDD ml-1"><i class="icon-copy ion-android-done-all chat_${chatArData.chat_status.toLowerCase()}"></i></div>\n              </div>\n            </div>`:messageUI+=`<div class="message_container  mb-3  extra_task_add_ani">\n             <div class=" message_sub_text" >${chatArData.chat_send_by}</div>\n              <div class="chat_content_text">${chatArData.chat_message}</div>\n              <div class="d-flex message_sub_text">\n                  <div class="chat_footer_text">${chat_date_c[0]+" - "+chat_date_c[1].slice(0,8)}</div>\n              </div>\n            </div>`}),$(".no_chat_template")&&$(".no_chat_template").remove(),$(".chat_append").append(messageUI);const scrollEl=$(".chat_append").parent();$(scrollEl).stop().animate({scrollTop:$(scrollEl)[0].scrollHeight},1)}}function addChat(){var userInput=$(".chatValue"),message=userInput.html().replace(/\<div\>|\<br.*?\>/gi,"\n").replace(/\<\/div\>/g,"").trim().replace(/\n/g,"<br>");if(!message.trim())return alertify.alert("Message!","Plesae enter your message.....");$(".chat_spinner").fadeIn();const chatDate=(new Date).toISOString(),backend_chat={user:logUserDatas.emp_name,taskOwner:chat_button_token.user,message:message,chatDate:chatDate,token:chat_button_token.token,status:"Unread"};taskChat(backend_chat).then(chat_cc=>{if(1==chat_cc.status){chatUI([chat_cc.data]);const sub_notify_value={tabs:"auto",software:"TASK",action:"Chat",message:"Chat has been added by "+logUserDatas.emp_name,click:"Click",receiver:logUserDatas.emp_name==chat_button_token.user?logUserDatas.manager:chat_button_token.user},sub_notify_value_1={token:chat_button_token.token,user_name:chat_button_token.user};addNotify_func(sub_notify_value_1,sub_notify_value),$(".chat_spinner").fadeOut()}else alertify.alert("Message!","Try again...!")}),userInput.html("")}function enterChatKey(e){(event.metaKey||event.ctrlKey)&&13==event.keyCode&&addChat()}var chat_button_token={};function chat_menu_button(e){const cardToken=$(e).attr("data-chat-token"),card_owner=$(e).attr("data-owner"),tab=$(e).attr("data-tab"),card_info=$(e).parent().prev().children().children(".card_info_text").text();console.log(tab),"manage"==tab||"view"==tab?$(".chat_input_box_cC").addClass("d-none"):$(".chat_input_box_cC").removeClass("d-none");const user=logUserDatas.emp_name,chat_ob={token:cardToken,user:card_owner,currentuser:user};chat_button_token=chat_ob,$(".chat_task_add_info").text(card_info),$("#chat_task_modal").modal("show"),$(".chat_append").html(loacalTemplate_chatLoader),$(e).children(".red_dt_cls").addClass("d-none"),getChats(chat_ob).then(chatFindData=>{0==chatFindData.status?chatUI([]):(chatUI(chatFindData.data),makechatread(chat_ob)),console.log(chatFindData)}),console.log(cardToken)}function logFunctions(){getAdminLogToday(logUserDatas.emp_name).then(tOD=>{addTodayLog(tOD.data)}),logAllSubName_on_manage()}function leadModal(e){$("#logINF").val(""),$("#log_add_modal").modal("show")}function logAllSubName_on_manage(){const subName=logUserDatas.allsubordinates.as;if(0==subName.length)$(".adminLog").remove();else{var optionsb='<option value=""  selected>Choose...</option>';subName.forEach(subAll=>{optionsb+=`<option value="${subAll}">${subAll}</option>`}),$("#log_manage_name").html(optionsb),console.log(subName)}}function addLogFL(e){const logD=$("#logINF").val();if(""==logD.trim())alertify.error("Please enter log info");else{$(e).html(button_loader),$("#today_log_append_list .no_record_img ")&&$("#today_log_append_list .no_record_img ").remove();const f={info:logD,username:logUserDatas.emp_name};addAdminLog(f).then(rER=>{$(e).html("Confirm"),$("#log_add_modal").modal("hide"),addTodayLog([rER.data])}),console.log(logD)}}function makeLogHtml(logcData){var today=logcData.log_add_date.toDate(),time=today.toLocaleTimeString().replace(/([\d]+:[\d]{2})(:[\d]{2})(.*)/,"$1$3"),day=today.toDateString(),log_html;return console.log(time,day),`<li>\n    <div class="task-name">\n    <i class="icon-copy ion-calendar"></i>\n        ${day}\n    </div>\n    <p>\n     ${logcData.log_info}\n    </p>\n    <div class="task-time"><i class="icon-copy ion-clock"></i> ${time}</div>\n</li>`}function addTodayLog(todayLogs){0==todayLogs.length?$("#today_log_append_list").prepend(log_no_record):todayLogs.forEach(logs=>{const logContainer=makeLogHtml(logs);$("#today_log_append_list").prepend(logContainer)})}function addViewLog(todayLogs){0==todayLogs.length?$("#view_log_append_list").prepend(log_no_record):todayLogs.forEach(logs=>{const logContainer=makeLogHtml(logs);$("#view_log_append_list").prepend(logContainer)})}function addManageLog(todayLogs){0==todayLogs.length?$("#manage_log_append_list").prepend(log_no_record):todayLogs.forEach(logs=>{const logContainer=makeLogHtml(logs);$("#manage_log_append_list").prepend(logContainer)})}function auto_move_tab_leads(manual_move){$(".tab_container_box .tab-pane").removeClass("show active"),$(".tab_container_box_header .nav-item .nav-link").removeClass("active"),""!=manual_move&&($(`[href="#${manual_move}_bg_tab"]`).addClass("active"),$(`#${manual_move}_bg_tab`).addClass("active show")),task_entry_point=null}var telecaller_details={},user_leads_container_ar=[],active_leads_ls_ar=[],assign_tab_list_ar=[],active_tab_list_ar=[],sitevisit_tab_list_ar=[];function leadsFunctions(){assign_tab_list_ar=[],active_tab_list_ar=[],sitevisit_tab_list_ar=[],get_assign_values(),$(".head_buttons").click(leads_header_btn)}var leads_menu_card_obj={},leads_sub_additional_data;function lead_menu_icons(e){const select_append_tab=$(e).parent().parent().parent().parent().parent().next();if(console.log(select_append_tab,"see"),$(select_append_tab).children().eq(0).hasClass("options_cc_container"))$(select_append_tab).empty(),$(e).children("i")[0].outerHTML='<i class="dw dw-down-arrow-4"></i>';else{refreshCard(),$(e).children("i")[0].outerHTML='<i class="dw dw-up-arrow"></i>';const loaderSp='<div style="text-align: center;" class="my-2"><div class="spinner-border text-success" role="status"><span class="visually-hidden">Loading...</span></div></div>',tab=$(e).attr("data-tab"),token=$(e).attr("data-modify"),card_user=$(e).attr("data-card-owner"),obj={user_name:card_user,token:token};console.log(obj),$(e).children(".red_dt_cls").addClass("d-none"),console.log($(e).parent().parent()),$(e).parent().parent().next().children(".red_dt_cls").addClass("d-none"),$(select_append_tab).html(loaderSp),modifyIcon_lead(obj).then(lead_data=>{if(console.log(lead_data),1==lead_data.status){const append_options_container=leads_modify_container(lead_data.data,tab);$(select_append_tab).html(append_options_container),leads_menu_card_obj=lead_data.data;const card=$(e).parent().parent().parent().parent().parent().parent(),cardparent=$(e).parent().parent().parent().parent().parent().parent().parent();console.log(cardparent,card),window.setTimeout((function(){var a=card[0].offsetTop;$(cardparent).stop().animate({scrollTop:a},10)}),100)}else alertify.alert("!Message","Please Try Again....")})}}function makeLeadsCard(leadTL,tab){let followUpDate,sitevisitDate,deadDate;"Lead Completed"!=leadTL.lead_followup_date&&"Lead Dead"!=leadTL.lead_followup_date&&(leadTL.lead_followup_date.toDate?followUpDate=leadTL.lead_followup_date.toDate():(followUpDate=new Date(1e3*leadTL.lead_followup_date._seconds),console.log(followUpDate))),"Completed"==leadTL.lead_card_status&&(sitevisitDate=leadTL.lead_site_visit_details.lead_scheduled_on.toDate?leadTL.lead_site_visit_details.lead_scheduled_on.toDate():new Date(1e3*leadTL.lead_site_visit_details.lead_scheduled_on._seconds)),"Closed"==leadTL.lead_card_status&&(console.log(leadTL),deadDate=leadTL.lead_dead_on.toDate?leadTL.lead_dead_on.toDate():new Date(1e3*leadTL.lead_dead_on._seconds)),deadDate=new Date(deadDate).toDateString(),followUpDate=new Date(followUpDate).toDateString(),sitevisitDate=new Date(sitevisitDate).toDateString();var leadCard=`<li class=" card-box mb-2   border-bottom card_template_main col-xl-7" data-card-container-${tab}="${leadTL.token}">\n    <div class="d-flex align-items-center justify-content-between">\n        <div class="name-avatar d-flex align-items-center ml-2">\n            <div>\n                <div>\n                    <div data-modify="${leadTL.token}" data-tab="${tab}" data-card-owner="${leadTL.lead_owner}">\n                        <span class="menu_tag_class" onclick="lead_menu_icons(this)" data-modify="${leadTL.token}" data-tab="${tab}" data-card-owner="${leadTL.lead_owner}">\n                            <i class="dw dw-down-arrow-4"></i>\n                            <div class="red_dt_cls d-none" style="transform: translate(15px, -20px);"></div>\n                        </span>\n\n                    </div>\n                </div>\n                <div class="cta flex-shrink-0 mx-3 chat_menu_cls" data-modify="Chat" data-chat-token="${leadTL.token}">\n                    <div class="red_dt_cls d-none bg-success" style="transform: translate(0px, -20px);"></div>\n                </div>\n            </div>\n            <div class="txt">\n                <div>\n                    <span class="badge badge-pill badge ${leadTL.lead_card_status.toLowerCase()}_badge_cls" style=" background-color: rgb(231, 235, 245);">${leadTL.lead_card_status}</span>\n                    <span class="badge badge-pill badge ${leadTL.lead_card_type.toLowerCase()}_badge_cls mx-1" style=" background-color: rgb(231, 235, 245);">${leadTL.lead_card_type}</span>\n                    <span class="badge badge-pill text-dark badge  mx-1" style=" background-color: rgb(231, 235, 245);">${leadTL.lead_client_status}</span>`;return"search"==tab&&(leadCard+=`<span class="badge badge-pill text-dark badge  mx-1" style=" background-color: rgb(231, 235, 245);">${leadTL.lead_owner}</span>`),0!=leadTL.lead_no_of_days&&(leadCard+=`<span class="badge badge-pill text-dark badge  mx-1" style=" background-color: rgb(231, 235, 245);font-size:10px !important;">No.Of.Days ${leadTL.lead_no_of_days}</span>`),leadTL.lead_remainder&&(leadCard+=`<span class="badge badge-pill  badge-primary text-white  mx-1" style="font-size:10px !important;">${leadTL.lead_remainder}</span>`),leadTL.delay&&""!=leadTL.delay&&(leadCard+=`<span class="badge badge-pill  badge-danger text-white  mx-1" style="font-size:8px !important;">${leadTL.delay}</span>`),leadTL.lead_missed_call_details.length>0&&(leadCard+='<span class="badge badge-pill  badge-danger text-white  mx-1" style="font-size:10px !important;"><i class="icon-copy bi bi-telephone-inbound-fill"></i></span>'),leadCard+=`</div>\n                <div class=" weight-600 card_info_text my-1">${leadTL.lead_client_name}</div>\n                <div class="font-12 weight-500 card_schedule_date" style="color: rgb(79 78 82);">`,"Completed"==leadTL.lead_card_status?leadCard+=`<span>\n                  <span><b class="text-success">Site visit schedule Date</b> : ${sitevisitDate}</span>\n              </span>`:"Pending"==leadTL.lead_card_status||"Scheduling"==leadTL.lead_card_status?leadCard+=`<span>\n                  <span><b class="text-success">FollowUp Date</b> : ${followUpDate}</span>\n              </span>`:"Closed"==leadTL.lead_card_status&&(leadCard+=`<span>\n                  <span><b class="text-success">Dead On Date</b> : ${deadDate}</span>\n              </span>`),leadCard+='</div>\n            </div>\n        </div>\n    </div>\n    <div class="options_append_tab "></div>\n    </li>'}function leads_modify_container(leadTL,tab){console.log(leadTL,tab);var leadTh=`<div class="options_cc_container"><div class="accordion accordion-flush" id="leads_expant_box_container">\n  <div class="accordion-item">\n      <h2 class="accordion-header" id="client_box_container_cc">\n          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#client_info_container_box" aria-expanded="false" aria-controls="client_info_container_box">\n              Client Details\n          </button>\n      </h2>\n      <div id="client_info_container_box" class="accordion-collapse collapse" aria-labelledby="client_box_container_cc" data-bs-parent="#leads_expant_box_container">\n          <div class="accordion-body">\n              <div class="client_info_table_container">\n                  <table class="table table-striped client_info_table">\n                      <tbody>\n                          <tr>\n                              <th>Client Name</th>\n                              <td>${leadTL.lead_client_name}</td>\n                          </tr>\n                          <tr>\n                              <th>Status</th>\n                              <td>${leadTL.lead_client_status}</td>\n                          </tr> \n                          <tr>\n                                <th>Received Date</th>\n                                <td>${leadTL.lead_receive_date.toDate().toDateString()}</td>\n                            </tr>\n                            <tr>\n                                <th>Card Owner</th>\n                                <td>${leadTL.lead_owner}</td>\n                            </tr>`;return leadTL.lead_client_phone_numbers.forEach((num,i)=>{""!=num.isd&&(leadTh+=`<tr>\n                              <th>ISD - ${i+1}</th>\n                              <td>${num.isd}</td>\n                           </tr>`),leadTh+=`<tr>\n                              <th>Phone.No - ${i+1}</th>\n                              <td>${num.number}</td>\n                           </tr>`}),leadTL.lead_email_id.forEach((email,i)=>{leadTh+=`<tr>\n                              <th>Email - ${i+1}</th>\n                              <td>${email}</td>\n                           </tr>`}),""!=leadTL.lead_project&&(leadTh+=`<tr>\n                            <th>Project</th>\n                              <td>${leadTL.lead_project}</td>\n                           </tr>`),""!=leadTL.lead_flat_type&&(leadTh+=`<tr>\n                            <th>Type</th>\n                              <td>${leadTL.lead_flat_type}</td>\n                           </tr>`),""!=leadTL.lead_budget&&(leadTh+=`<tr>\n                            <th>Project</th>\n                              <td>${leadTL.lead_budget}</td>\n                           </tr>`),""!=leadTL.lead_squre_feet&&(leadTh+=`<tr>\n                            <th>Project</th>\n                              <td>${leadTL.lead_squre_feet}</td>\n                           </tr>`),leadTL.lead_source.forEach((srcD,i)=>{leadTh+=`<tr>\n                              <th>Main Source- ${i+1}</th>\n                              <td>${srcD.main}</td>\n                           </tr>\n                           <tr>\n                              <th>Sub Source - ${i+1}</th>\n                              <td>${srcD.sub}</td>\n                           </tr>`}),leadTh+=`</tbody>\n                  </table>\n              </div>\n          </div>\n      </div>\n  </div>\n  <div class="accordion-item">\n      <h2 class="accordion-header" id="action_icons_container_cc">\n          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#action_icons_container_box" aria-expanded="true" aria-controls="action_icons_container_box">\n              Actions\n          </button>\n      </h2>\n      <div id="action_icons_container_box" class="accordion-collapse collapse show" aria-labelledby="action_icons_container_cc" data-bs-parent="#leads_expant_box_container">\n          <div class="accordion-body">\n              <div class="leads_icons_container">\n                  <div class="container">\n                      <div class="d-flex  text-center leads_actions_icons_list" data-token="${leadTL.token}" data-lead-owner="${leadTL.lead_owner}" data-tab="${tab}">\n                          <div class="m-1 leads_action_icon conversations_icons_box" data-icon-name="conversations" onclick="leads_icons(this)">\n                              <div class="lead_cl_icon">\n                                  <i class="icon-copy dw dw-chat-4"></i>\n                              </div>\n                              <div class="lead_cl_text">Conversation</div>\n                          </div>`,"assigned"==tab&&(leadTh+='<div class=" m-1 leads_action_icon brochure_icons_box" data-icon-name="brochure" onclick="leads_icons(this)">\n                                <div class="lead_cl_icon">\n                                    <i class="icon-copy dw dw-folder-28"></i>\n                                </div>\n                            <div class="lead_cl_text">brochure</div>\n                         </div>\n                         ',leadTL.lead_client_phone_numbers.forEach((num,i)=>{leadTh+=`\n                            <a target="iframe_a" href="https://open.pulsework360.com/sidd_callapi.php?token=d310d5288060f4180fd860c70b9692f2&agent_number=${telecaller_details[0].agent_number}&pwd=${telecaller_details[0].password}&customer_number=${num.number.toString().trim()}" class=" m-1 leads_action_icon call_icons_box" data-icon-name="call" title="${num.number}" data-num="${num.number}" onclick="leads_icons(this)">\n                            <div class="lead_cl_icon">\n                                <i class="icon-copy dw dw-phone-call"></i>\n                            </div>\n                             <div class="lead_cl_text">Call - ${i+1}</div>\n                         </a>`})),"assigned"==tab||"active"==tab?leadTh+='<div class=" m-1 leads_action_icon complete_icons_box" data-icon-name="complete" onclick="leads_icons(this)">\n                                <div class="lead_cl_icon">\n                                    <i class="icon-copy bi bi-patch-check-fill"></i>\n                                </div>\n                                <div class="lead_cl_text">Complete</div>\n                            </div>\n                            <div class=" m-1 leads_action_icon addinfo_icons_box" data-icon-name="addinfo" onclick="leads_icons(this)">\n                              <div class="lead_cl_icon">\n                                  <i class="icon-copy dw dw-add"></i>\n                              </div>\n                              <div class="lead_cl_text">Add Info</div>\n                          </div>':"search"==tab&&"Closed"!=leadTL.lead_card_status?leadTh+='<div class=" m-1 leads_action_icon complete_icons_box" data-icon-name="gotocard" onclick="leads_icons(this)">\n                                <div class="lead_cl_icon">\n                                    <i class="icon-copy bi bi-patch-check-fill"></i>\n                                </div>\n                                <div class="lead_cl_text">Go to Card</div>\n                            </div>':"sitevisit"==tab&&"Site Visit Completed"!=leadTL.lead_client_status&&(leadTh+='<div class=" m-1 leads_action_icon complete_icons_box" data-icon-name="visited" onclick="leads_icons(this)">\n                            <div class="lead_cl_icon">\n                            <i class="icon-copy dw dw-house"></i>\n                            </div>\n                            <div class="lead_cl_text">Site visited</div>\n                        </div>'),leadTh+="</div>\n                  </div>\n              </div>\n          </div>\n      </div>\n  </div>\n\n</div></div>"}function lead_modify_card(card_data,tab){console.log(card_data,tab);const wDcard=card_data[0];var modify_make;"assigned"==tab?modify_make=makeLeadsCard(wDcard,tab):"active"==tab&&(modify_make=makeLeadsCard(wDcard,tab));const find_tag=$(`.card_template_main[data-card-container-${tab}=${wDcard.token}]`);console.log(find_tag),find_tag&&(find_tag[0].outerHTML=modify_make,"assigned"==tab?(assign_tab_list_ar=assign_tab_list_ar.map(rep=>rep.token==wDcard.token?wDcard:rep),lead_assigned_tab_set_count()):"active"==tab&&(active_tab_list_ar=active_tab_list_ar.map(rep=>rep.token==wDcard.token?wDcard:rep),lead_acitve_tab_set_count())),console.log(find_tag)}function deleted_lead_all(data,tab){$(`.card_template_main[data-card-container-${tab}=${data.token}]`).remove(),"assigned"==tab?assign_tab_list_ar=assign_tab_list_ar.filter(eTask=>eTask.token!=data.token):"active"==tab&&(active_tab_list_ar=active_tab_list_ar.filter(eTask=>eTask.token!=data.token));const pard=Array.from($(`#${tab}_card_list_container`).children(".card_template_main"));0==pard.length&&$(`#${tab}_card_list_container`).html(no_record),"active"==tab?lead_acitve_tab_set_count():"assigned"==tab&&lead_assigned_tab_set_count()}function lead_acitve_tab_set_count(){const status_list=active_tab_list_ar,lead_status_obj={cold:[],warm:[],hot:[],reenquired:[]},leadCard_status_obj={pending:[],scheduling:[]},missed=[];status_list.filter(status_list=>{"Cold"!=status_list.lead_client_status&&"Warm"!=status_list.lead_client_status&&"Hot"!=status_list.lead_client_status&&"Re-Enquired"!=status_list.lead_client_status||lead_status_obj[status_list.lead_client_status.toLowerCase().replaceAll(" ","_").replaceAll("-","")].push(status_list),"Pending"!=status_list.lead_card_status&&"Scheduling"!=status_list.lead_card_status||leadCard_status_obj[status_list.lead_card_status.toLowerCase()].push(status_list),status_list.lead_missed_call_details.length>0&&missed.push(status_list)});const status_D=Object.keys(lead_status_obj);let dcD=0;status_D.filter(key_status=>{dcD+=lead_status_obj[key_status].length,$(`.active_count_list_${key_status}`).text(lead_status_obj[key_status].length)});const status_DC=Object.keys(leadCard_status_obj);status_DC.filter(key_status=>{$(`.active_count_list_${key_status}`).text(leadCard_status_obj[key_status].length)}),$(".active_count_list_missed").text(missed.length),$(".active_count_list_total").text(dcD)}function lead_assigned_tab_set_count(){const status_list=assign_tab_list_ar,lead_status_obj={cold:[],warm:[],hot:[],reenquired:[]},leadCard_status_obj={pending:[],scheduling:[]},missed=[];status_list.filter(status_list=>{"Cold"!=status_list.lead_client_status&&"Warm"!=status_list.lead_client_status&&"Hot"!=status_list.lead_client_status&&"Re-Enquired"!=status_list.lead_client_status||lead_status_obj[status_list.lead_client_status.toLowerCase().replaceAll(" ","_").replaceAll("-","")].push(status_list),"Pending"!=status_list.lead_card_status&&"Scheduling"!=status_list.lead_card_status||leadCard_status_obj[status_list.lead_card_status.toLowerCase()].push(status_list),status_list.lead_missed_call_details.length>0&&missed.push(status_list)});const status_D=Object.keys(lead_status_obj);let dcD=0;status_D.filter(key_status=>{dcD+=lead_status_obj[key_status].length,$(`.status_count_s_${key_status}`).text(lead_status_obj[key_status].length)});const status_DC=Object.keys(leadCard_status_obj);status_DC.filter(key_status=>{$(`.status_count_s_${key_status}`).text(leadCard_status_obj[key_status].length)}),$(".status_count_s_missed").text(missed.length),$(".status_count_s_total").text(dcD)}function lead_sitevisit_tab_set_count(){const status_list=sitevisit_tab_list_ar,lead_status_obj={sitevisitscheduled:[],sitevisitcompleted:[]};status_list.filter(status_list=>{"Site Visit Scheduled"!=status_list.lead_client_status&&"Site Visit Completed"!=status_list.lead_client_status||lead_status_obj[status_list.lead_client_status.toLowerCase().replaceAll(" ","").replaceAll("-","")].push(status_list)});const status_D=Object.keys(lead_status_obj);status_D.filter(key_status=>{$(`.sitevisit_count_list_${key_status}`).text(lead_status_obj[key_status].length)})}function makeLeadActiveCard(leadAr,callback,empty_count){const appengingTag=$("#active_card_list_container");if(remove_no_RL(appengingTag),empty_count&&(active_tab_list_ar=[]),0==leadAr.length)$(appengingTag).html(no_record);else if(leadAr.forEach(task_make_card=>{active_tab_list_ar.push(task_make_card);const makeCard=makeLeadsCard(task_make_card,"active");$(appengingTag).append(makeCard)}),0!=callback){const select_card=$(`[data-card-container-pending=${callback.notification_data.doc_id}]`)}lead_acitve_tab_set_count()}function makeLeadAssignCard(leadAr,callback,empty_count){const appengingTag=$("#assigned_card_list_container");if(remove_no_RL(appengingTag),empty_count&&(assign_tab_list_ar=[]),0==leadAr.length)$(appengingTag).html(no_record);else if(leadAr.forEach(task_make_card=>{assign_tab_list_ar.push(task_make_card);const makeCard=makeLeadsCard(task_make_card,"assigned");$(appengingTag).append(makeCard)}),0!=callback){const select_card=$(`[data-card-container-pending=${callback.notification_data.doc_id}]`)}lead_assigned_tab_set_count()}function makeLeadSitevisitCard(leadAr,callback,empty_count){const appengingTag=$("#sitevisit_card_list_container");if(remove_no_RL(appengingTag),empty_count&&(sitevisit_tab_list_ar=[]),0==leadAr.length)$(appengingTag).html(no_record);else if(leadAr.forEach(task_make_card=>{sitevisit_tab_list_ar.push(task_make_card);const makeCard=makeLeadsCard(task_make_card,"sitevisit");$(appengingTag).append(makeCard)}),0!=callback){const select_card=$(`[data-card-container-sitevisit=${callback.notification_data.doc_id}]`)}lead_sitevisit_tab_set_count()}function makeLeadSearchCard(leadAr){const appengingTag=$("#search_card_list_container");remove_no_RL(appengingTag),0==leadAr.length?$(appengingTag).html(no_record):leadAr.forEach(task_make_card=>{console.log(task_make_card),sitevisit_tab_list_ar.push(task_make_card);const makeCard=makeLeadsCard(task_make_card,"search");$(appengingTag).append(makeCard)})}function leads_header_btn(){let btnType=$(this).attr("data-modal");"create"==btnType&&$(".hD_element").css("display","none"),$(`#${btnType}_leads_modal_form`)[0].reset(),$(`#${btnType}_leads_modal`).modal("show")}function create_leads(e){const formValidations=add_lead_validFrom();if(1==formValidations.status){const formData_obj=formValidations.formAr,sub={owner_name:logUserDatas.emp_name,manager:logUserDatas.manager};$(e).html(button_loader),addfreshleads(formData_obj,sub).then(de=>{1==de.status&&($(e).html("Submit"),$("#create_leads_modal").modal("hide"),alertify.success("Lead added successfully"))})}}function add_lead_validFrom(){const getForm=$("#create_leads_modal_form");var formData=new FormData(getForm[0]),form_object={},projcetAr=Array.from($(".project_c_box")),getProjcet=[];return projcetAr.filter(prd=>{const rE=$(prd)[0].checked;if(1==rE){const va=$(prd)[0].value;getProjcet.push(va)}}),form_object.client_name=toNameCase(formData.get("client_name")),form_object.isd_1=formData.get("isd_1"),form_object.phone_1=formData.get("phone_1"),form_object.isd_2=formData.get("isd_2"),form_object.phone_2=formData.get("phone_2"),form_object.email_1=formData.get("email_1"),form_object.email_2=formData.get("email_2"),form_object.project_name=formData.get("project_name"),form_object.budg=formData.get("budg"),form_object.type=formData.get("type"),form_object.squ=formData.get("squ"),form_object.project_name=formData.get("project_name"),form_object.main_src_1=formData.get("main_src_1"),form_object.sub_src_1=formData.get("sub_src_1"),form_object.main_src_2=formData.get("main_src_2"),form_object.sub_src_2=formData.get("sub_src_2"),form_object.client_status=formData.get("client_status"),form_object.remarks=formData.get("remarks"),form_object.dead_remark=formData.get("dead_remarks"),form_object.followUp=formData.get("followUpdate_date"),form_object.locations=formData.get("dead_location"),""==form_object.client_name?(alertify.error("Please enter client name"),{status:!1}):""==form_object.isd_1?(alertify.error("Please enter ISD Number"),{status:!1}):""==form_object.phone_1?(alertify.error("Please enter Phone Number"),{status:!1}):form_object.phone_1.length<9?(alertify.error("Invalid phone number"),{status:!1}):""==form_object.email_1?(alertify.error("Please enter email id"),{status:!1}):0==form_object.email_1.includes("@")?(alertify.error("Invalid email id"),{status:!1}):""==form_object.project_name||null==form_object.project_name?(alertify.error("Please select project name"),{status:!1}):""==form_object.budg?(alertify.error("Please select Budget range"),{status:!1}):""==form_object.type?(alertify.error("Please select type"),{status:!1}):""==form_object.squ?(alertify.error("Please Square feet"),{status:!1}):""==form_object.main_src_1?(alertify.error("Please selecet main source"),{status:!1}):""==form_object.sub_src_1?(alertify.error("Please select sub source"),{status:!1}):""==form_object.client_status?(alertify.error("Please select client status"),{status:!1}):""==form_object.remarks?(alertify.error("Please enter remarks"),{status:!1}):"Dead"!=form_object.client_status&&""==form_object.followUp?(alertify.error("Please selecet followup date"),{status:!1}):"Dead"==form_object.client_status&&""==form_object.dead_remark?(alertify.error("Please selecet dead remarks"),{status:!1}):"NI Location"==form_object.dead_remark&&""==form_object.locations?(alertify.error("Please selecet  locations"),{status:!1}):{status:!0,formAr:form_object}}function leads_icons(e){Array.from($(".leads_modifty_modal_form")).forEach(fE=>{$(fE)[0].reset()});const getIcon=$(e).attr("data-icon-name"),token=$(e).parent().attr("data-token"),lead_owner=$(e).parent().attr("data-lead-owner"),cardD=leads_menu_card_obj;if(console.log(cardD),"call"==getIcon){const nmD=$(e).attr("data-num");console.log(cardD.lead_client_name,nmD),$(".call_name").val(cardD.lead_client_name),$(".call_number").val(nmD),callingRemarkDD(cardD)}else if("brochure"==getIcon){let num_radio="",email_radio="";cardD.lead_client_phone_numbers.forEach((num,i)=>{num_radio+=`<div class="custom-control custom-radio mb-5">\n        <input type="radio" id="sm-${i}" name="send_to_num_radio" class="custom-control-input  sendToNumCls" value="${num.number}">\n        <label class="custom-control-label" for="sm-${i}">${num.number}</label>\n      </div>`}),$("#send_br_num_ap").html(num_radio),0==cardD.lead_email_id.length||(cardD.lead_email_id.forEach((email,i)=>{email_radio+=`<div class="custom-control custom-radio mb-5">\n                        <input type="radio" id="se-${i}" name="send_to_mail_radio" value="${email}" class="custom-control-input sendToEmCls" >\n                        <label class="custom-control-label" for="se-${i}">${email}</label>\n                        </div>`}),$("#send_br_email_ap").html(email_radio))}else if("addinfo"==getIcon)$("[name=client_name_info]").val(cardD.lead_client_name),""!=cardD.lead_project&&$(`.project_c_box_add[value=${cardD.lead_project}]`).attr("checked",!0);else if("conversations"==getIcon)leadCChatRender();else if("complete"==getIcon)$(".dy_base_box_completed").css("display","none");else if("gotocard"==getIcon)if(lead_owner==logUserDatas.emp_name){const tab=leads_menu_card_obj.lead_on_tab.toLowerCase();if("active"==tab||"assigned"==tab){auto_move_tab_leads(tab);const select_card=$(`[data-card-container-${tab}=${token}]`);moving_card(`#${tab}_card_list_container`,select_card)}}else alertify.error(`Card owner ${lead_owner}`);else"visited"==getIcon&&setSiteCompleted(cardD);console.log(getIcon,token,lead_owner),$(`#lead_${getIcon}_modity_modal`).modal("show")}function setSiteCompleted(data){$(".siteCompletedForm")[0].reset(),$(".compleateSV_base").css("display","none"),$(".sitevisitCompleteClient").val(data.lead_client_name),$(".sitevisitScheduleData").val(data.lead_site_visit_details.lead_scheduled_on.toDate().toDateString())}function sitevisitCompleteDD(e){const eed=leads_menu_card_obj,remarE=$("#siteComRemark").val(),clienEt=$("#completeSelectStatus").val();if(""==clienEt)alertify.error("Please select client status");else if("Site Visit Completed"==clienEt){const complete_date=$("#siteCDate").val();if(""==complete_date)alertify.error("Please select completed date");else{const ofB={date:complete_date,remark:remarE};$(e).html(button_loader),siteCompleteDD(eed,ofB).then(()=>{$(e).html("Confirm"),$(`.card_template_main[data-card-container-sitevisit=${eed.token}]`).remove(),$("#lead_visited_modity_modal").modal("hide"),alertify.success("Completed")});const seEE=dateToStr(new Date),speadDSO={"Follow Up Date":"Lead Completed","Client Status":"Site Visit Completed","Card Status":"Completed","worked On":seEE,"Site Visit Status":"Site Visit Completed"},speadTk=eed.lead_id.trim();update_spreadSheet(speadDSO,speadTk)}}else if("Dead"!=clienEt){const schedule_date=$("#rescheCDate").val();if(""==schedule_date)alertify.error("Please select reschedule date");else{const ofB={status:clienEt,date:schedule_date,remark:remarE};$(e).html(button_loader),siteRescheduleDD(eed,ofB).then(()=>{$(e).html("Confirm"),$(`.card_template_main[data-card-container-sitevisit=${eed.token}]`).remove(),$("#lead_visited_modity_modal").modal("hide"),alertify.success("Completed")}),removeSaleDatabase(eed.token);const seEE=dateToStr(schedule_date),speadDSO={"Follow Up Date":seEE,"Client Status":clienEt,"Card Status":"Pending","worked On":(new Date).toLocaleDateString()},speadTk=eed.lead_id.trim();update_spreadSheet(speadDSO,speadTk),add_spreadSheet_chat({id:speadTk,owner:logUserDatas.emp_name,message:remarE})}}else if("Dead"==clienEt){$(e).html(button_loader);const e={remark:remarE};lead_dead_subD(dead_data,eed).then(()=>{$(e).html("Confirm"),$(`.card_template_main[data-card-container-sitevisit=${eed.token}]`).remove(),$("#lead_visited_modity_modal").modal("hide"),alertify.success("Completed")}),removeSaleDatabase(eed.token);const worked_d=dateToStr(new Date),speadDSO={"Follow Up Date":"Lead Dead","Client Status":"Dead","Card Status":"Completed","worked On":worked_d,Remarks:remarE},speadTk=eed.lead_id.trim();add_dead_spreadSheet(speadDSO,speadTk),add_spreadSheet_chat({id:speadTk,owner:logUserDatas.emp_name,message:remarks})}""==complete_date?alertify.error("Please select completed date"):($(e).html(button_loader),$("#lead_visited_modity_modal").modal("hide"),siteCompleteDD(eed,complete_date).then(()=>{$(e).html("Confirm"),$(`.card_template_main[data-card-container-sitevisit=${eed.token}]`).remove(),$("#lead_visited_modity_modal").modal("hide"),alertify.success("Completed")}))}function sendWhatsapp(e){const selectNum=Array.from($(".sendToNumCls")),selectMessa=Array.from($(".sendTypeMessage")),customsMsg=$(".whatsapp_customs_msgg");let sendD,typemessage;if(selectNum.filter(radio=>{const eRr=$(radio)[0].checked,erV=$(radio).val();if(1==eRr)return sendD=erV,erV}),selectMessa.filter(radio=>{const eRr=$(radio)[0].checked,erV=$(radio).val();if(1==eRr)return typemessage=erV,erV}),"auto"!=typemessage&&""==$(customsMsg).val())alertify.error("Please enter message");else if(null==sendD)alertify.error("Please select number");else{const eV=$(e);$(eV).html(button_loader),console.log(sendD)}}function sendEmail(e){const selectId=Array.from($(".sendToEmCls"));let email;if(selectId.filter(radio=>{const eRr=$(radio)[0].checked,erV=$(radio).val();if(1==eRr)return email=erV,erV}),null==email)alertify.error("Please select email id");else{const eV=$(e);$(eV).html(button_loader),console.log(email)}}function leadsAddInfo(e){const formE=new FormData($("#add_info_form")[0]),formEb={};formEb.cname=formE.get("client_name_info"),formEb.cnumber=formE.get("client_number_info"),formEb.cemail=formE.get("client_email_info"),formEb.cproject=formE.get("project_name_add"),formEb.cbdg=formE.get("bdg_info"),formEb.ctype=formE.get("type_info"),formEb.csql=formE.get("sql_info"),formEb.cisd=formE.get("client_isd_info"),null==formEb.cproject&&(formEb.cproject="");const sudEL={old_lead:leads_menu_card_obj};$(e).html(button_loader),adddetails(formEb,sudEL).then(d=>{1==d.status&&($(e).html("Confirm"),$("#lead_addinfo_modity_modal").modal("hide"),alertify.success("added succesfully"))}),console.log(formEb)}function complete_select_status(e){const statusE=$(e),statusValue=statusE[0].value;$(".dy_base_box_completed").css("display","none"),""!=statusValue&&$(`#complete_card_${statusValue.toLowerCase().replaceAll(" ","")}`).css("display","block")}function oncab(e){const thSs=$(e)[0].checked,next=$(e).parent().next();1==thSs?$(next).slideDown():$(next).slideUp()}function lead_call_status(e){const complete_f=new FormData($("#call_leads_modal_form")[0]),callER={};callER.status=complete_f.get("calling_status_se"),callER.remark=complete_f.get("calling_remark"),callER.reminder=complete_f.get("calling_remainder"),console.log(callER.reminder);const leD=leads_menu_card_obj;if(""!=callER.reminder){var datetime=new Date;datetime.setHours(datetime.getHours()+Number(callER.reminder)),callER.reminder=datetime.toLocaleTimeString().replace(/([\d]+:[\d]{2})(:[\d]{2})(.*)/,"$1$3")}""==callER.status?alertify.error("Please select call status"):($(e).html(button_loader),console.log(callER,leD),callrecord(callER,leD).then(d=>{1==d.status&&($("#lead_call_modity_modal").modal("hide"),$(e).html("Confirm"),alertify.success("Added successfully"))}),""!=callER.remark.trim()&&add_spreadSheet_chat({id:leD.lead_id,owner:logUserDatas.emp_name,message:callER.remark.trim()}))}function lead_complete_func(e){const complete_f=new FormData($("#completeForm")[0]),status=complete_f.get("status"),remarks=complete_f.get("complete_remark"),subD={owner_name:logUserDatas.emp_name,token:leads_menu_card_obj.token},leadSheetId=leads_menu_card_obj.lead_id;if(""==status)alertify.error("Please select client status");else if(""==remarks.trim())alertify.error("Please enter your remarks");else if("Site visit"==status){const addVa=leads_menu_card_obj;if(""==addVa.lead_budget)alertify.error("Missing client budget range");else if(""==addVa.lead_project)alertify.error("Missing client project");else if(""==addVa.lead_flat_type)alertify.error("Missing client flat type");else if(""==addVa.lead_squre_feet)alertify.error("Missing client squre feet");else{const sitevisit_data={};if(sitevisit_data.visit_date=complete_f.get("sitevisit_date"),sitevisit_data.visit_time=complete_f.get("sitevisit_time"),sitevisit_data.remarks=remarks,sitevisit_data.cab=complete_f.get("cab_cbox"),""==sitevisit_data.visit_date)return alertify.error("Please select site visit date");if(""==sitevisit_data.visit_time)return alertify.error("Please select site visit time");let dke;"Booked"==sitevisit_data.cab&&(sitevisit_data.cab_address=complete_f.get("cab_address"),sitevisit_data.cab_land_mark=complete_f.get("cab_land_mark"),sitevisit_data.cab_map_link=complete_f.get("cab_maplink"),sitevisit_data.cab_member=complete_f.get("cab_member"));const ckE=Object.values(sitevisit_data).every(ds=>""!=ds);ckE?($(e).html(button_loader),lead_addSite_visit(sitevisit_data,subD).then(d=>{if(1==d.status){$(e).html("Confirm"),$("#lead_complete_modity_modal").modal("hide"),alertify.success("added succesfully");const worked_d=dateToStr(new Date),speadDSO={"Follow Up Date":"Lead Completed","Client Status":"Site Visit Scheduled","Card Status":"Completed","worked On":worked_d,"Completed Date":worked_d},speadTk=leadSheetId.trim();let saleEmple="";"Greenwood"==leads_menu_card_obj.lead_project&&(saleEmple="kathiravan");const saleData={id:leadSheetId,sitevisitDate:sitevisit_data.visit_date,client_name:leads_menu_card_obj.lead_client_name,isd1:leads_menu_card_obj.lead_client_phone_numbers[0].isd,ph1:leads_menu_card_obj.lead_client_phone_numbers[0].number,isd2:leads_menu_card_obj.lead_client_phone_numbers[1]?leads_menu_card_obj.lead_client_phone_numbers[1].isd:"",ph2:leads_menu_card_obj.lead_client_phone_numbers[1]?leads_menu_card_obj.lead_client_phone_numbers[1].number:"",mail1:leads_menu_card_obj[0]?leads_menu_card_obj[0]:"",mail2:leads_menu_card_obj[1]?leads_menu_card_obj[1]:"",project:leads_menu_card_obj.lead_project,type:leads_menu_card_obj.lead_flat_type,sqFt:leads_menu_card_obj.lead_squre_feet,main1:leads_menu_card_obj.lead_source[0].main,sub1:leads_menu_card_obj.lead_source[0].sub,main2:leads_menu_card_obj.lead_source[1]?leads_menu_card_obj.lead_source[1].main:"",sub2:leads_menu_card_obj.lead_source[1]?leads_menu_card_obj.lead_source[1].sub:"",main3:leads_menu_card_obj.lead_source[2]?leads_menu_card_obj.lead_source[2].main:"",sub3:leads_menu_card_obj.lead_source[2]?leads_menu_card_obj.lead_source[2].sub:"",cab_address:sitevisit_data.cab?sitevisit_data.cab_address:"",cab_land_mark:sitevisit_data.cab?sitevisit_data.cab_land_mark:"",site_admin:leads_sub_additional_data.sales.sales_admin,site_manager:leads_sub_additional_data.sales.sales_manager,tele_name:leads_menu_card_obj.lead_owner,cab_status:sitevisit_data.cab?"TRUE":"FALSE",budget:leads_menu_card_obj.lead_budget,remark:remarks,saleEmp:saleEmple};update_spreadSheet(speadDSO,speadTk),add_spreadSheet_chat({id:speadTk,owner:logUserDatas.emp_name,message:remarks}),add_sitevisit_sales(saleData)}})):alertify.error("Site visit form invalid1"),console.log(sitevisit_data,ckE)}}else if("Reschedule"==status){const reschedule_data={};if(reschedule_data.remarks=remarks,reschedule_data.reshedule_date=complete_f.get("complete_rescheudle_date"),reschedule_data.reshedule_status=complete_f.get("complete_reschedule_status"),""==reschedule_data.reshedule_date)return alertify.error("Please select reschedule date");if(""==reschedule_data.reshedule_status)return alertify.error("Please select client status");$(e).html(button_loader),lead_reschedule(reschedule_data,subD).then(dW=>{if(1==dW.status){$(e).html("Confirm"),$("#lead_complete_modity_modal").modal("hide"),alertify.success("added succesfully"),console.log(reschedule_data);const worked_d=dateToStr(new Date),seEE=dateToStr(reschedule_data.reshedule_date),speadDSO={"Follow Up Date":seEE,"Client Status":reschedule_data.reshedule_status,"Card Status":"Pending","worked On":worked_d},speadTk=leadSheetId.trim();update_spreadSheet(speadDSO,speadTk),add_spreadSheet_chat({id:speadTk,owner:logUserDatas.emp_name,message:remarks})}})}else if("Dead"==status){const dead_data={};if(dead_data.remarks=remarks,dead_data.dead_remark=complete_f.get("complete_dead_remark"),dead_data.location=complete_f.get("complete_dead_location_r2"),""==dead_data.dead_remark)return alertify.error("Please select dead remark");$(e).html(button_loader),lead_dead(dead_data,subD).then(d=>{if(1==d.status){$(e).html("Confirm"),$("#lead_complete_modity_modal").modal("hide"),alertify.success("added succesfully");const worked_d=dateToStr(new Date),speadDSO={"Follow Up Date":"Lead Dead","Client Status":"Dead","Card Status":"Completed","worked On":worked_d,Remarks:remarks},speadTk=leadSheetId.trim();add_dead_spreadSheet(speadDSO,speadTk),add_spreadSheet_chat({id:speadTk,owner:logUserDatas.emp_name,message:remarks})}})}console.log(complete_f,leadSheetId)}function lead_tele_dashboard_fitler(){const value=$("#lead_tele_dash_report_select").val()}function leads_assign_tele_filter(e){const filter_sub={};filter_sub.main_src=$("#leads_assign_tele_main_src").val(),filter_sub.sub_src=$("#leads_assign_tele_sub_src").val(),filter_sub.client_status=$("#leads_assign_tele_client_status").val(),filter_sub.card_status=$("#leads_assign_tele_card_status").val(),filter_sub.start_date=$("#leads_assign_tele_card_start_date").val(),filter_sub.end_date=$("#leads_assign_tele_card_end_date").val();const proE=Array.from($(".project_c_box_filter_assigned"));proE.forEach(roA=>{1==$(roA)[0].checked&&(filter_sub.project=$(roA).val())});const sub_details={card_user:logUserDatas.emp_name,tab:"Assigned"};"Custom"==filter_sub.card_status?""==filter_sub.start_date?alertify.error("Please select start date"):""==filter_sub.end_date?alertify.error("Please select end date"):(fetch_loader_show("#assigned_card_list_container"),leads_tell_tab_filter(filter_sub,sub_details).then(filteRE=>{if($("#assigned_card_list_container").empty(),1==filteRE.status){const des=filteRE.data;tele_filter_app_data("Assigned",des)}})):(fetch_loader_show("#assigned_card_list_container"),leads_tell_tab_filter(filter_sub,sub_details).then(filteRE=>{if($("#assigned_card_list_container").empty(),1==filteRE.status){const des=filteRE.data;tele_filter_app_data("Assigned",des)}}))}function tele_filter_app_data(tab,data){"Assigned"==tab?makeLeadAssignCard(data,!1,!0):"Active"==tab&&makeLeadActiveCard(data,!1,!0)}function leads_active_tele_filter(){const filter_sub={};filter_sub.main_src=$("#leads_active_tele_main_src").val(),filter_sub.sub_src=$("#leads_active_tele_sub_src").val(),filter_sub.client_status=$("#leads_active_tele_client_status").val(),filter_sub.card_status=$("#leads_active_tele_card_status").val(),filter_sub.start_date=$("#leads_active_tele_card_start_date").val(),filter_sub.end_date=$("#leads_active_tele_card_end_date").val();const sub_details={card_user:logUserDatas.emp_name,tab:"Active"},proE=Array.from($(".project_c_box_filter_active"));proE.forEach(roA=>{1==$(roA)[0].checked&&(filter_sub.project=$(roA).val())}),console.log(filter_sub),"Custom"==filter_sub.card_status?""==filter_sub.start_date?alertify.error("Please select start date"):""==filter_sub.end_date?alertify.error("Please select end date"):(fetch_loader_show("#active_card_list_container"),leads_tell_tab_filter(filter_sub,sub_details).then(filteRE=>{if($("#active_card_list_container").empty(),1==filteRE.status){const des=filteRE.data;console.log(filteRE),tele_filter_app_data("Active",des)}})):(fetch_loader_show("#active_card_list_container"),leads_tell_tab_filter(filter_sub,sub_details).then(filteRE=>{if($("#active_card_list_container").empty(),1==filteRE.status){const des=filteRE.data;console.log(filteRE),tele_filter_app_data("Active",des)}}))}function tele_search_lead(e){const searchE=$("#tele_search_value").val(),typed=$("#tele_search_type").val();if(""==searchE)alertify.error("Please enter value...");else{const eVe=$(e);$(eVe).html(button_loader),$(eVe).prop("disabled",!0),fetch_loader_show("#search_card_list_container");const seEc={type:typed,key:searchE};console.log(seEc),fetch("https://us-central1-nodal-time-327708.cloudfunctions.net/app/api/searchLead",{method:"POST",body:JSON.stringify(seEc)}).then(e=>{e.json().then(ew=>{$(eVe).prop("disabled",!1),$(eVe).html("Confirm"),$("#search_card_list_container").empty(),1==ew.status?(console.log(ew.data),makeLeadSearchCard(ew.data)):makeLeadSearchCard([])},err=>{alertify.error("Please try again"),$(eVe).prop("disabled",!1),$(eVe).html("Confirm"),makeLeadSearchCard([])})},err=>{alertify.error("Please try again"),$(eVe).prop("disabled",!1),$(eVe).html("Confirm"),makeLeadSearchCard([])})}}function tele_sitevisti_fitler(){const vD={};vD.start_date=$("#sitevisit_filter_start_date").val(),vD.end_date=$("#sitevisit_filter_end_date").val(),vD.status=$("#tele_site_filter_type").val(),""==vD.start_date?alertify.error("Please select end start"):""==vD.end_date?alertify.error("Please select end date"):(fetch_loader_show("#sitevisit_card_list_container"),sitevisitCard_filter(vD,logUserDatas.emp_name).then(d=>{$("#sitevisit_card_list_container").empty(),1==d.status&&makeLeadSitevisitCard(d.data,!1,!0)}),console.log(vD))}function enablE_client(e){const eD=$(e),eDValue=$(eD).val(),neXe=$(eD).parent().next();$(".base_cs").css("display","none"),""!=eDValue?"Dead"==eDValue?$(neXe).next().slideDown():$(neXe).slideDown():$(neXe).slideUp()}function get_assign_values(){getAdditional_values().then(add_subS=>{console.log(add_subS),leads_sub_additional_data=add_subS.data,leads_set_values()})}function leads_set_values(){const datas=leads_sub_additional_data;setMain_src_sel(datas)}function select_main_src_set_sub(e){const selectEv=$(e),selectVe=$(e).val(),appEv=$($(e).attr("data-base-sub")),type=$(e).attr("data-select-type");let select;const sub_data=leads_sub_additional_data.source_details;if(console.log(type),select="without"==type?' <option selected value="">Choose...</option>':' <option selected value="All">All</option>',"All"==selectVe||""==selectVe)$(appEv).html(select);else{const getSubSrc=sub_data.filter(sub=>sub.mainsource==selectVe),datas_sub=getSubSrc[0].subsouce;datas_sub.forEach(suD=>{select+=`<option  value="${suD}">${suD}</option>`}),$(appEv).html(select)}}function type_base(e){const value=$(e).val(),apE=$(e).attr("data-sq");let optType='<option selected="selected" value="">Choose...</option>';if(console.log(value),""!=value){let type=leads_sub_additional_data.bhk_list.filter(ty=>ty.bhk_type==value);type=type[0].sqft,console.log(type),type.forEach(tE=>{optType+=`<option  value="${tE}">${tE}</option>`})}$(apE).html(optType)}function setMain_src_sel(dataS){telecaller_details=dataS.agent_list.filter(agent=>agent.user_name==logUserDatas.emp_name),console.log(telecaller_details);const value=dataS.source_details,main_src=value.map(main=>main.mainsource);let all='<option value="All">All</option>',select='<option value="">choose...</option>';main_src.forEach(d=>{all+=`<option value="${d}">${d}</option>`,select+=`<option value="${d}">${d}</option>`}),$(".main_src_select_wd").html(all),$(".main_src_ww").html(select);const project_value=dataS.project_list;let projec_1="",projec_2="",projec_3='<div class="custom-control custom-radio mb-5">\n    <input checked type="radio" class="custom-control-input project_c_box_filter_assigned " name="project_name_assigned_filter" value="All" id="project-add-assigned-filter-all">\n    <label class="custom-control-label weight-400" for="project-add-assigned-filter-all">All</label>\n</div>',projec_4='<div class="custom-control custom-radio mb-5">\n    <input checked type="radio" class="custom-control-input project_c_box_filter_active  " name="project_name_active_filter" value="All" id="project-add-active-filter-all">\n    <label class="custom-control-label weight-400" for="project-add-active-filter-all">All</label></div>';project_value.forEach((pro,i)=>{projec_1+=`<div class="custom-control custom-radio mb-5">\n        <input  type="radio" class="custom-control-input project_c_box " name="project_name" value="${pro}" id="project-${i}">\n        <label class="custom-control-label weight-400" for="project-${i}">${pro}</label>\n    </div>`,projec_2+=`<div class="custom-control custom-radio mb-5">\n      <input type="radio" class="custom-control-input project_c_box_add " name="project_name_add" value="${pro}" id="project-add-${i}">\n      <label class="custom-control-label weight-400" for="project-add-${i}">${pro}</label>\n  </div>`,projec_3+=`<div class="custom-control custom-radio mb-5">\n      <input type="radio" class="custom-control-input project_c_box_filter_assigned " name="project_name_assigned_filter" value="${pro}" id="project-add-assigned-filter-${i}">\n      <label class="custom-control-label weight-400" for="project-add-assigned-filter-${i}">${pro}</label>\n  </div>`,projec_4+=`<div class="custom-control custom-radio mb-5">\n      <input type="radio" class="custom-control-input project_c_box_filter_active " name="project_name_active_filter" value="${pro}" id="project-add-active-filter-${i}">\n      <label class="custom-control-label weight-400" for="project-add-active-filter-${i}">${pro}</label>\n  </div>`}),$("#add_leads_project").html(projec_1),$("#add_info_project").html(projec_2),$("#add_active_filter_project").html(projec_4),$("#add_assigned_filter_project").html(projec_3),console.log(dataS);let bud=dataS.budget_range,budOp='<option value="" selected>Choose...</option>';bud.forEach(budget=>{console.log(budget),budOp+=`<option value="${budget}">${budget}</option>`}),$(".budget_sel").html(budOp);let type=dataS.bhk_list.map(tE=>tE.bhk_type),typeopt='<option selected value="">Choose...</option>';type.forEach(typeds=>{typeopt+=`<option  value="${typeds}">${typeds}</option>`}),$(".type_sel").html(typeopt);let remarE=dataS.dead_sub_status,remaopt='<option selected value="">Choose...</option>';remarE.forEach(rema=>{remaopt+=`<option  value="${rema}">${rema}</option>`}),$(".dead_rm").html(remaopt);let locationsd=dataS.location_list.map(fE=>fE.pole),locaO='<option selected value="">Choose...</option>';locationsd.forEach(loc=>{locaO+=`<option  value="${loc}">${loc}</option>`}),$(".dead_location_pole").html(locaO)}function base_location(e){const aE=$(e).val(),eElem=$(e).parent().parent().next().children("div").children("select");let locaO='<option selected value="">Choose...</option>';if(""!=aE){const filee=leads_sub_additional_data.location_list.filter(lo=>lo.pole==aE);let dEd;filee[0].location.split(",").forEach(loeE=>{locaO+=`<option  value="${loeE}">${loeE}</option>`})}$(eElem).html(locaO)}function dead_lo(e){const ess=$(e).val(),nx=$(e).attr("data-loc");"NI Location"==ess?$(nx).slideDown():$(nx).slideUp()}function filterCTab(e){const ed=$(e).val(),hiE=$(e).parent().parent().next();"Custom"==ed?$(hiE).slideDown():$(hiE).slideUp()}function leadchatUI(chatData,appendType){if(0==chatData.length)$(".no_chat_text").html("<h6>No Record</h6>");else{var messageUI="";chatData.forEach(chatArData=>{const chat_date_c=chatArData.chat_date.toDate();chatArData.chat_send_by==logUserDatas.emp_name?messageUI+=`<div class="message_container  mb-3 mLeft extra_task_add_ani">\n             <div class="text-end message_sub_text" >You</div>\n              <div class="chat_content_text">${chatArData.chat_message}</div>\n              <div class="d-flex message_sub_text justify-content-end">\n                  <div class="chat_footer_text  text-end mb-2 align-items-center">${chat_date_c.toDateString()+" - "+chat_date_c.toLocaleTimeString()}</div>\n                  <div class="messageDD ml-1"><i class="icon-copy ion-android-done-all chat_${chatArData.chat_status.toLowerCase()}"></i></div>\n              </div>\n            </div>`:messageUI+=`<div class="message_container  mb-3  extra_task_add_ani">\n             <div class=" message_sub_text" >${chatArData.chat_send_by}</div>\n              <div class="chat_content_text">${chatArData.chat_message}</div>\n              <div class="d-flex message_sub_text">\n                  <div class="chat_footer_text">${chat_date_c.toDateString()+" - "+chat_date_c.toLocaleTimeString()}</div>\n              </div>\n            </div>`}),$(".no_chat_template")&&$(".no_chat_template").remove(),$(".chat_append").append(messageUI);const scrollEl=$(".chat_append").parent();$(scrollEl).stop().animate({scrollTop:$(scrollEl)[0].scrollHeight},1)}}function leadChat(){var userInput=$(".chatValue"),message=userInput.html().replace(/\<div\>|\<br.*?\>/gi,"\n").replace(/\<\/div\>/g,"").trim().replace(/\n/g,"<br>");if(!message.trim())return alertify.alert("Message!","Plesae enter your message.....");$(".chat_spinner").fadeIn();const chatDate=(new Date).toISOString();console.log(leads_menu_card_obj,"asdfasdf");const backend_chat={user:logUserDatas.emp_name,lead_owner:leads_menu_card_obj.lead_owner,message:message,chatDate:chatDate,token:leads_menu_card_obj.token,status:"Unread"};leadChatBC(backend_chat).then(chat_cc=>{1==chat_cc.status?(leadchatUI([chat_cc.data]),$(".chat_spinner").fadeOut()):alertify.alert("Message!","Try again...!")}),userInput.html("")}function leadenterChatKey(e){(event.metaKey||event.ctrlKey)&&13==event.keyCode&&leadChat()}function leadCChatRender(vA){const dEchat=leads_menu_card_obj,chat_ob={token:dEchat.token,user:dEchat.lead_owner,currentuser:logUserDatas.emp_name};var cardToken=dEchat.toke;$(".chat_append").html(loacalTemplate_chatLoader),getLeadChats(chat_ob).then(chatFindData=>{console.log(chat_ob,"dfasdfasdfasdfasdf"),0==chatFindData.status?leadchatUI([]):leadchatUI(chatFindData.data),console.log(chatFindData)})}function callingRemarkDD(dEchat){const chat_ob={token:dEchat.token,user:dEchat.lead_owner,currentuser:logUserDatas.emp_name};$(".remarkClientView").empty(),getLeadChats(chat_ob).then(chatFindData=>{if(console.log(chat_ob,"dsfasdf"),1==chatFindData.status){let chEE="";chatFindData.data.forEach(remarE=>{chEE+=`<div class="card border-dark mb-3 p-2">\n                 <div class="card-header">${remarE.chat_send_by}</div>\n                 <div class="card-body text-primary">${remarE.chat_message}</div>\n                 <pre class="card-footer">${remarE.chat_date.toDate().toDateString()}</pre>\n                </div>`}),$(".remarkClientView").html(chEE)}console.log(chatFindData,"dsfasdf")})}var statusCLEE=[];function tele_dash_report(updateStatus){updateStatus.forEach(leadsDE=>{const statusE=leadsDE.s,leadDataE=leadsDE.data;"added"==statusE?statusCLEE.push(leadDataE):"modified"==statusE?statusCLEE=statusCLEE.map(modifyLead=>modifyLead.token==leadDataE.token?leadDataE:modifyLead):"removed"==statusE&&(statusCLEE=statusCLEE.filter(removeLead=>removeLead.token!=leadDataE.token))}),liveUpdatesClientStatus()}function liveUpdatesClientStatus(){const sTA=statusCLEE,lead_count_total={cold:[[],[]],warm:[[],[]],hot:[[],[]],reenquired:[[],[]],sitevisitscheduled:[[],[]],sitevisitcompleted:[[],[]],fresh:[[],[]]};sTA.filter(dEE=>{if(("Cold"==dEE.lead_client_status||"Warm"==dEE.lead_client_status||"Hot"==dEE.lead_client_status||"Site Visit Scheduled"==dEE.lead_client_status||"Site Visit Completed"==dEE.lead_client_status||"Re-Enquired"==dEE.lead_client_status)&&(lead_count_total[dEE.lead_client_status.toLowerCase().replaceAll(" ","").replaceAll("-","")][0].push(dEE),""!=dEE.lead_worked_on)){const wDate=dEE.lead_worked_on.toDate(),matchd=(new Date).toDateString();wDate.toDateString()==matchd&&lead_count_total[dEE.lead_client_status.toLowerCase().replaceAll(" ","").replaceAll("-","")][1].push(dEE)}const receivarED=dEE.lead_receive_date.toDate();receivarED.toDateString()==(new Date).toDateString()&&lead_count_total.fresh[0].push(dEE)});const keyD=Object.keys(lead_count_total);keyD.forEach(keyhj=>{$(`.${keyhj}_leads_report`).children().eq(2).text(lead_count_total[keyhj][0].length),$(`.${keyhj}_leads_report`).children().eq(1).text(lead_count_total[keyhj][1].length)})}function deadCount_dashboard(count1,count2){$(".dead_leads_report").children().eq(1).text(count1),$(".dead_leads_report").children().eq(2).text(count2)}function findContactNumber(e){const preEle=$(e).parent().children(".contactSpin"),type=$(e).attr("data-type"),key=$(e).val();if(key.trim().length>8){$("#leadCreatBtn").prop("disabled",!0),$(preEle).removeClass("d-none");const seEc={type:type,key:key};fetch("https://us-central1-nodal-time-327708.cloudfunctions.net/app/api/searchLead",{method:"POST",body:JSON.stringify(seEc)}).then(e=>{$(preEle).addClass("d-none"),e.json().then(ew=>{0!=ew.status?(alertify.alert("Message!","This Number already exits"),$("#leadCreatBtn").prop("disabled",!0)):$("#leadCreatBtn").prop("disabled",!1)},err=>{})},err=>{})}}function update_spreadSheet(updatekey,token){return console.log(updatekey,token,"saraarrr"),new Promise((res,rej)=>{const post_SA_Data={changeObj:updatekey,token:token};fetch("https://us-central1-nodal-time-327708.cloudfunctions.net/app/api/LeadUpdateRow",{method:"POST",body:JSON.stringify(post_SA_Data)}).then(fetch_return=>{fetch_return.json().then(return_json=>{console.log(return_json,token,updatekey,"dfdfddf")})}),res({status:"success"})})}function add_dead_spreadSheet(updatekey,token){return console.log(updatekey,"dead"),new Promise((res,rej)=>{const post_SA_Data={changeObj:updatekey,token:token};fetch("https://us-central1-nodal-time-327708.cloudfunctions.net/app/api/addDeadLead",{method:"POST",body:JSON.stringify(post_SA_Data)}).then(fetch_return=>{fetch_return.json().then(return_json=>{res(return_json)})})})}function add_spreadSheet_chat(chatOB){return new Promise((res,rej)=>{const worked_d=dateToStr(new Date),post_SA_Data={"Id.No":chatOB.id,"Chat Date and time":worked_d+" "+(new Date).toLocaleTimeString(),"Owner Name":chatOB.owner,Message:chatOB.message};fetch("https://us-central1-nodal-time-327708.cloudfunctions.net/app/api/leadChatAdd",{method:"POST",body:JSON.stringify(post_SA_Data)}).then(fetch_return=>{fetch_return.json().then(return_json=>{res(return_json)})})})}function add_sitevisit_sales(add_obj){return new Promise((res,rej)=>{fetch("https://us-central1-nodal-time-327708.cloudfunctions.net/app/api/addSalesLead",{method:"POST",body:JSON.stringify(add_obj)}).then(fetch_return=>{fetch_return.json().then(return_json=>{res(return_json)})})})}function add_fresh_leads(add_obj){return new Promise((res,rej)=>{fetch("https://us-central1-nodal-time-327708.cloudfunctions.net/app/api/addFreshLead",{method:"POST",body:JSON.stringify(add_obj)}).then(fetch_return=>{fetch_return.json().then(return_json=>{res(return_json)})})})}function call_live_count(call_data){const call_statusE={outbound:[[],[]],inbound:[[],[]]},mise=[];call_data.forEach(data_d=>{"NO ANSWER"==data_d.call_status||"BUSY"==data_d.call_status?(data_d.call_event,call_statusE[data_d.call_event][0].push(1)):"ANSWERED"==data_d.call_status?(data_d.call_event,call_statusE[data_d.call_event][1].push(1)):"MISSED"==data_d.call_status&&mise.push(1)}),$(".calling_count_answare_in").text(call_statusE.inbound[1].length),$(".calling_count_answare_out").text(call_statusE.outbound[1].length),$(".calling_count_not_answare_out ").text(call_statusE.outbound[0].length),$(".calling_count_missed_in ").text(mise.length),$(".calling_count_total ").text(call_data.length)}function sitevisitSTS(e){const vaE=$(e).val();$(".compleateSV_base").css("display","none"),""!=vaE&&("Site Visit Completed"==vaE?$("#svComplete_sitevisitcompleted").slideDown():"Dead"!=vaE&&$("#svComplete_reschedule").slideDown())}function log_view_filter(e){const dates={};dates.from=$("#log_view_start_date").val(),dates.to=$("#log_view_end_date").val(),""==dates.from?alertify.error("Please select from date"):""==dates.to?alertify.error("Please selecet to date"):($(e).html(button_loader),$(e).prop("disabled",!0),$("#view_log_append_list").empty(),logViewFilter(dates,{user:logUserDatas.emp_name}).then(returnValue=>{$(e).html("Filter"),$(e).prop("disabled",!1),addViewLog(returnValue.data)}))}function log_manage_filter(e){const fiDTT={};fiDTT.selectName=$("#log_manage_name").val(),fiDTT.date=$("#log_manage_date").val(),""==fiDTT.selectName?alertify.error("Please select name"):""==fiDTT.date?alertify.error("Please select date"):($(e).html(button_loader),$(e).prop("disabled",!0),$("#manage_log_append_list").empty(),logMangefilter(fiDTT).then(returnValue=>{$(e).html("Filter"),$(e).prop("disabled",!1),addManageLog(returnValue.data)}))}var DialPad={init:function(){this.filter(),this.keypad(),this.dialing()},dialing:function(){$(".people").click((function(){DialPad.call($(this))})),$(".action .btn").click((function(){$(this).toggleClass("active")})),$(".call-end").click((function(){$(".left-pan").removeClass("active"),$(".calling").fadeOut(100),$(".contacts").fadeIn(800),$(".calling .photo").html(""),$(".calling .name").html("Unknown"),$(".calling .number").html("")}))},longClick:function(){var pressTimer;$('.dial-key-wrap[data-key="back"]').mouseup((function(){return clearTimeout(pressTimer),!1})).mousedown((function(){return pressTimer=window.setTimeout((function(){$(".dial-screen").text("")}),1e3),!1}))},keypad:function(){$(".dial-key-wrap").on("click",(function(){var key=$(this).data("key"),display=$(".dial-screen").text();switch(key){case"back":DialPad.press($('.dial-key-wrap[data-key="back"]')),display=$(".dial-screen").text(display.substring(0,display.length-1)),DialPad.longClick();break;case"call":DialPad.press($('.dial-key-wrap[data-key="call"]')),DialPad.call();break;case 0:DialPad.press($('.dial-key-wrap[data-key="0"]')),display=$(".dial-screen").text(display+"0");break;case 1:DialPad.press($('.dial-key-wrap[data-key="1"]')),display=$(".dial-screen").text(display+"1");break;case 2:DialPad.press($('.dial-key-wrap[data-key="2"]')),display=$(".dial-screen").text(display+"2");break;case 3:DialPad.press($('.dial-key-wrap[data-key="3"]')),display=$(".dial-screen").text(display+"3");break;case 4:DialPad.press($('.dial-key-wrap[data-key="4"]')),display=$(".dial-screen").text(display+"4");break;case 5:DialPad.press($('.dial-key-wrap[data-key="5"]')),display=$(".dial-screen").text(display+"5");break;case 6:DialPad.press($('.dial-key-wrap[data-key="6"]')),display=$(".dial-screen").text(display+"6");break;case 7:DialPad.press($('.dial-key-wrap[data-key="7"]')),display=$(".dial-screen").text(display+"7");break;case 8:DialPad.press($('.dial-key-wrap[data-key="8"]')),display=$(".dial-screen").text(display+"8");break;case 9:DialPad.press($('.dial-key-wrap[data-key="9"]')),display=$(".dial-screen").text(display+"9");break;case"*":DialPad.press($('.dial-key-wrap[data-key="*"]')),display=$(".dial-screen").text(display+"*");break;case"#":DialPad.press($('.dial-key-wrap[data-key="#"]')),display=$(".dial-screen").html(display+"#")}DialPad.filter()}))},call:function(info){var num=$(".dial-screen").text().length,photo,name,number;(console.log(num),num>8)&&($(".left-pan").addClass("active"),$(".contacts").fadeOut(100),$(".calling").fadeIn(800),info?(photo=info.find("img").attr("src")?'<img src="'+info.find("img").attr("src")+'">':null,name=info.find(".name").text()?info.find(".name").text():"Unknown",number=info.find(".phone2_lNumber").text(),$(".calling .photo").html(photo),$(".calling .name").text(name),$(".calling .number").text(number)):$(".calling .number").text($(".dial-screen").text()),setTimeout((function(){$(".call-end .btn").focus()}),800))},filter:function(){var highlight=function(string){if(string.length>4){var hrefD=`https://open.pulsework360.com/sidd_callapi.php?token=d310d5288060f4180fd860c70b9692f2&agent_number=${telecaller_details[0].agent_number}&pwd=${telecaller_details[0].password}&customer_number=${string}`;$(".callIFrame").attr("href",hrefD),console.log("dsfadsf",string),$(".people .number.match").each((function(){var matchStart=$(this).text().toLowerCase().indexOf(""+string.toLowerCase()),matchEnd=matchStart+string.length-1,beforeMatch=$(this).text().slice(0,matchStart),matchText=$(this).text().slice(matchStart,matchEnd+1),afterMatch=$(this).text().slice(matchEnd+1);$(this).html(beforeMatch+'<span class="highlight">'+matchText+"</span>"+afterMatch)}))}},showcontact=function(){$(".people .number").each((function(){"inline"==$(this).css("display")?$(this).parent().parent().parent().show():$(this).parent().parent().parent().hide()}))},_this=$(".dial-screen");_this.text()&&_this.text().length>8?(console.log(_this.text()),$(".people .number").removeClass("match").hide().filter((function(){return-1!=$(this).text().toLowerCase().indexOf(_this.text().toLowerCase())})).addClass("match").show(),highlight(_this.text()),$(".people").show(),showcontact()):$(".people,.people .number").removeClass("match").hide()},press:function(obj){var button=obj.addClass("active");setTimeout((function(){button.removeClass("active")}),200)}};function showManualDailer(){const status=$("#daileContainer").attr("data-active"),container=$("#daileContainer");if($("#dialerAllNUM").empty(),$(".dial-screen").empty(),$("#daileContainer").empty(),"true"==status)$(container).slideUp(),$("#daileContainer").attr("data-active","false");else{const merchContact=active_tab_list_ar.concat(assign_tab_list_ar);$(container).slideDown(),$("#daileContainer").attr("data-active","true"),dialerHtml(),merchContact.forEach(addContact=>{const clienEtE=dialerNumberfilter(addContact);$("#dialerAllNUM").append(clienEtE)})}}function contactMove(e){const token=$(e).attr("data-token"),tab=$(e).attr("data-tab").toLowerCase();auto_move_tab_leads(tab);const select_card=$(`[data-card-container-${tab}=${token}]`);moving_card(`#${tab}_card_list_container`,select_card)}function dialerNumberfilter(leadData){var dailerHtml=`<div class="people clearfix" style="cursor:pointer;" onclick="contactMove(this)" data-token="${leadData.token}" data-tab="${leadData.lead_on_tab}">\n    <div class="photo pull-left">\n    </div>\n    <div class="info pull-left">\n       <div class="name">${leadData.lead_client_name}</div>`;return leadData.lead_client_phone_numbers.forEach(eNum=>{dailerHtml+=`<div class="phone2_lNumber"><span>${eNum.isd}</span><span class="number">${eNum.number}</span></div>`}),dailerHtml+="</div>\n </div>"}function dialerHtml(){const dialerCC='<div class="dialEEEEER" >\n    <div class="left-pan">\n        <div class="contacts">\n           <div class="title">Contacts</div>\n           <div id="dialerAllNUM">\n           </div>\n          \n        </div>\n        <div class="calling">\n           <div class="title fadeIn animated infinite">Calling</div>\n           <div class="photo bounceInDown animated"></div>\n           <div class="name rubberBand animated">Unknown</div>\n           <div class="number"></div>\n           \x3c!-- <div class="action">\n              <div class="lnk"><button class="btn fadeInLeftBig animated"><i class="fa fa-mic"></i></button></div>\n              <div class="lnk"><button class="btn fadeInLeftBig animated"><i class="fa fa-vol"></i></button></div>\n              <div class="lnk"><button class="btn fadeInRightBig animated"><i class="fa fa-camera"></i></button></div>\n              <div class="lnk"><button class="btn fadeInRightBig animated"><i class="fa fa-video-camera"></i></button></div>\n           </div> --\x3e\n           <div class="call-end bounceInUp animated">\n              <button class="btn"><i class="fa fa-phone"></i></button>\n           </div>\n        </div>\n     </div>\n     <div class="dial-pad">\n        <div class="dial-screen border-bottom" contenteditable="false"></div>\n        <div class="dial-table">\n           <div class="dial-table-row">\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="1">\n                    <div class="dial-key">1</div>\n                    <div class="dial-sub-key">&nbsp;</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="2">\n                    <div class="dial-key">2</div>\n                    <div class="dial-sub-key">abc</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="3">\n                    <div class="dial-key">3</div>\n                    <div class="dial-sub-key">def</div>\n                 </div>\n              </div>\n           </div>\n           <div class="dial-table-row">\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="4">\n                    <div class="dial-key">4</div>\n                    <div class="dial-sub-key">ghi</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="5">\n                    <div class="dial-key">5</div>\n                    <div class="dial-sub-key">jkl</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="6">\n                    <div class="dial-key">6</div>\n                    <div class="dial-sub-key">mno</div>\n                 </div>\n              </div>\n           </div>\n           <div class="dial-table-row">\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="7">\n                    <div class="dial-key">7</div>\n                    <div class="dial-sub-key">pqrs</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="8">\n                    <div class="dial-key">8</div>\n                    <div class="dial-sub-key">tuv</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="9">\n                    <div class="dial-key">9</div>\n                    <div class="dial-sub-key">wxyz</div>\n                 </div>\n              </div>\n           </div>\n           <div class="dial-table-row">\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="*">\n                    <div class="dial-key">*</div>\n                    <div class="dial-sub-key">&nbsp;</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="0">\n                    <div class="dial-key">0</div>\n                    <div class="dial-sub-key">+</div>\n                 </div>\n              </div>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="#">\n                    <div class="dial-key">#</div>\n                    <div class="dial-sub-key">&nbsp;</div>\n                 </div>\n              </div>\n           </div>\n           <div class="dial-table-row no-sub-key">\n              <div class="dial-table-col">\n              </div>\n              <a class="dial-table-col callIFrame" href="" target="iframe_a">\n                 <div class="dial-key-wrap" data-key="call">\n                    <div class="dial-key"><i class="fa fa-phone"></i></div>\n                    <div class="dial-sub-key">Call</div>\n                 </div>\n              </a>\n              <div class="dial-table-col">\n                 <div class="dial-key-wrap" data-key="back">\n                    <div class="dial-key"><i class="fa fa-long-arrow-left"></i></div>\n                    <div class="dial-sub-key">Back</div>\n                 </div>\n              </div>\n           </div>\n        </div>\n     </div>\n</div>';$("#daileContainer").html(dialerCC),DialPad.init()}